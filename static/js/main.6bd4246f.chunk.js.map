{"version":3,"sources":["NavigationMenu/NavigationMenu.js","Visualizer/Visualizer.js","Database/database.js","Visualizer/VisualizerManager.js","LocationSelector/LocationSelector.js","MetricSelector/MetricSelector.js","Services/User.js","Graph/SaveGraph.js","RangeSelector/RangeSelector.js","Graph/CreateGraph.js","Dashboard/Dashboard.js","Login/Login.js","SampleHome/SampleHome.js","Users/CreateModifyDeleteUser.js","Account/Account.js","Users/Users.js","Sync/Sync.js","Analysis/LocationWrapper.js","Analysis/Analysis.js","DataQuality/DataQuality.js","App.js","serviceWorker.js","index.js"],"names":["App","rightButtonRenderer","_this","props","rightButtonAction","rightButtonType","react_default","a","createElement","es_button","type","onClick","className","icon","row","col","span","this","openDrawer_f","title","Component","strokeColors","averageColor","colorCounter","monthNames","Visualizer","getNextColor","color","length","resetColor","startDate","mockMetric","name","location","state","lga","ward","facility","data","Month","Year","Value","Math","floor","random","mockSet","endDate","Metric","mockGroup","legendTitles","createBarSeriesData","rawData","map","filter","element","y","x","barSeries","es","legend","orientation","items","createBarSeriesAverage","sum","count","forEach","el","average","lineData","strokeDasharray","renderGraph","graph","MultipleBar","Histogram","Line","defaults","width","height","xDistance","barChartLeftMargin","maxLength","i","j","round","result","group","push","key","createMultipleBarSeries","yType","margin","left","redundantTitle","replace","trim","concat","barSeriesData","averageLine","createHistogramData","elements","series","dataForYear","hasOwnProperty","Date","Time","Number","parseInt","sort","b","currentYear","blankData","blankDataSeries","colorType","getUTCFullYear","getUTCMonth","marks","legendElement","createLineSeriesWithLegend","empty","description","xType","_this2","show","Object","keys","undefined","db","Dexie","version","stores","Facility","Ward","LGA","State","Groups","Sets","Metrics","Data","User","LocalUser","Dashboard","DashboardData","VisualizerManager","ready","checkInputs","valid","validInputs","LocationId","value","LocationType","includes","DataId","DataType","StartDate","prototype","toString","call","EndDate","isSimpleData","formatDate","date","slice","getUTCDate","getSimpleData","where","between","toArray","arr","setState","graphType","getComplexData","RawData","MetricValue","charAt","SetValue","Title","queryComplexData","formatDateForRemoteQuery","period","url","rootURL","DataPresentation","console","log","fetch","then","stream","json","parseFloat","Total","titleIndex","d","setUTCMonth","splice","ParentHandler","setStateFromProps","callback","LocationName","Location","Name","Id","Type","TotalOrDistribution","Dates","run","prevProps","spin","src_Visualizer_Visualizer","hierarchyLevels","Option","es_select","style","LocationSelector","findAllLocations","Promise","resolve","National","StateList","LGAList","WardList","FacilityList","enabledDisabledLists","selectedLocation","componentDidUpdate","_callee","oldProps","regenerator_default","wrap","_context","prev","next","disabled","enableDisableLists","stop","componentWillMount","setLocations","findIndexForLocationType","locationType","findIndex","_callee2","maxScope","initialLocation","_context2","initLocationIndex","locations","getLocationHierarchyForInitLocation","setLocationState","_callee3","currentIndex","currentLocationId","completionCallback","_context3","abrupt","findLocationByQuery","sent","parentId","objectSpread","notifyParent","updateList","handleChange","level","_this$setState","_this$setState2","currentLevelIndex","currentLevel","parseLocation","defineProperty","_loop","statePropertyName","_callee4","levelIndex","callBack","list","listName","queryProperty","aboveLevel","aboveLevelId","optionsList","_context4","parentHandler","queryParams","valueArr","split","placeholder","optionFilterProp","defaultValue","showSearch","onChange","hidden","showLocation","MetricSelector","findAll","Group","Set","GroupList","SetList","MetricList","selectedData","componentDidMount","setInitialDataState","initialData","GroupValue","parseData","createLocationObject","typeID","totalOrDistribution","nextType","totalString","distributionString","aboveName","findByQuery","MetricSelector_Option","showLabel","userService","login","email","password","reject","loginApiRoute","process","method","headers","Content-Type","body","JSON","stringify","Email","Password","userJsonObj","success","clear","add","user","catch","e","logout","SaveGraph","saveGraph","toCollection","last","object","newGraph","Locations","put","message","MonthPicker","RangeSelector","plusOne","num","dateToString","getFullYear","getMonth","getDay","dateString","_this3","_this4","moment","startDateOnChange","endDateOnChage","CreateGraph","updateRawData","updateLocation","updateData","updateDates","dates","loc","obj","getTitle","gutter","xs","offset","sm","md","lg","card","size","src_LocationSelector_LocationSelector","divider","src_MetricSelector_MetricSelector","src_RangeSelector_RangeSelector","Visualizer_VisualizerManager","Graph_SaveGraph","fullSize","reportCard","showGraphs","graphOpenCloseState","graphDataLoaded","related","relatedGraphs","fullSizeOrListChanged","target","reportCardOrGraphsChanged","window","dispatchEvent","Event","toggleGraph","copy","newVal","open","anyOpen","text","toggleAllGraphs","openState","createCollapseExpandButton","getFirstLocation","loadGraphsFromDB","visibility","showInFilter","graphData","findAllGraphs","item","findRelatedGraphs","allData","relatedFound","metricData","toggleViewRelated","currentView","processFoundData","createViewRelatedButton","createDeleteButton","popconfirm","placement","okText","cancelText","onConfirm","deleteGraph","processedRelatedData","temp","parse","delete","renderRelated","es_list","itemLayout","dataSource","renderItem","item1","Item","Meta","assign","itemHasCompare","renderGraphs","actions","toUTCString","substring","GraphType","showHideCreateGraphUI","Graph_CreateGraph","Login","handleInput","property","preTab","minWidth","textAlign","UserService","updateDrawer","history","input","addonBefore","withRouter","userObj","src_Login_Login","Fragment","FirstName","userFields","CreateModifyDeleteUser","inputLabelTab","mode","userChanged","locationDisabled","loggedInUser","isUser","confirmDelete","passedUser","refreshUsers","back","error","adminFeatures","showTable_f","inputChanged","stateName","userInfo","userInformationChanged","basicFeatures","array","featureName","featureNameKey","allUserTypeOptions","UserType","handleUserTypeSelect","modifyControls","enableEditing","cancelEditing","save","computedState","u","userType","changed","successMessage","errorMessage","successHandler","userObject","Error","newProps","userState","Account","Users_CreateModifyDeleteUser","populateUsers","LastName","permissionLevel","toUpperCase","lastNameCompare","localeCompare","dataLoaded","showTable","selectedUser","columns","dataIndex","defaultSortOrder","sorter","filters","onFilter","record","filterMultiple","render","editUser","id","newUser","find","showHideTableClass","showHideViewClass","addUser","tableHidden","colStyle","class","table","Sync","showProgress","DataDownloads","startDownload","downloads","dataName","bulkAdd","users","all","dl","dl_i","Sync_DataProgress","downloadDashboard","_dashboard","dashboard","DashboardJson","dashboards","params","UserId","dashboardData","info","xl","timeline","DataProgress","pending","failed","Icon","pendingIcon","failedIcon","completeIcon","Message","pendingMessage","failedMessage","completeMessage","get","dot","LocationWrapper","componnentDidMount","saveLocation","cancelLocation","Analysis","initLoading","loading","locationData","addingLocation","dataForSingleLocation","dataForAllLocations","showGraph","generateGraph","createMetricGraph","createSetGraph","context","forEachPromise","getDataPromiseByLocation","getMetricsPromise","metrics","getLocationPromise","fn","reduce","promise","context2","getDataPromise","setId","equalsIgnoreCase","metric","point","MetricData","Compare","tempData","warning","addLocation","deleteLocation","editLocation","_this$state","block","pagination","page","pageSize","values","marginLeft","href","Analysis_LocationWrapper","MetricsReportedInLastYear","DataQuality","setLocation","getQualityOfData","Score","toFixed","es_alert","banner","closable","Header","Footer","Content","pathNamesAndTitles","/","/account","/dashboard","/analysis","/users","/sync","/health","pathName","pathname","drawerOpen","openDrawer","closerDrawer","BrowserRouter","layout","drawer","onClose","visible","menu","Link","to","padding","NavigationMenu_NavigationMenu","Route","exact","path","SampleHome_SampleHome","component","rel","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","src_App_0","document","getElementById","URL","origin","addEventListener","response","contentType","status","indexOf","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.6bd4246f.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Row, Col, Button, Icon } from 'antd';\n\nimport './NavigationMenu.css';\n\n/**\n * Navigation Menu Component\n * \n * Accepts up to three props:\n *  - title\n *  - rightButtonType\n *  - rightButtonAction\n */\n\nclass App extends Component {\n\n    rightButtonRenderer = () =>{\n        if (this.props.rightButtonAction != null && this.props.rightButtonType != null){\n            return (\n                <Button type=\"default\" onClick={this.props.rightButtonAction} className=\"ghost-button\">\n                    <Icon\n                        className=\"trigger\"\n                        type={this.props.rightButtonType ? this.props.rightButtonType : \"menu-fold\"}\n                        />\n                </Button>\n            )\n        }else{\n            return null\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"navMenu\">\n            <Row>\n                {/* This button opens and closes the drawer */}\n                <Col span= {4}>\n                    <Button type=\"default\" onClick={this.props.openDrawer_f} className=\"ghost-button\">\n                        <Icon\n                            className=\"trigger\"\n                            type='menu-unfold'\n                            />\n                    </Button>\n                </Col>\n                <Col span = {16}>\n                    <h2 className = \"nowrap center\">\n                        {this.props.title}\n                    </h2>\n                </Col>\n                <Col span= {4}>\n                    {this.rightButtonRenderer()}\n                </Col>\n\n\n            </Row>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import React, { Component } from 'react';\n\n//react-vis for graphs\nimport '../../node_modules/react-vis/dist/style.css';\nimport {Empty} from 'antd'\nimport { FlexibleWidthXYPlot, XAxis, YAxis, HorizontalGridLines, LineSeries, LineMarkSeries, DiscreteColorLegend, VerticalGridLines, HorizontalBarSeries} from 'react-vis';\n\nconst strokeColors = [\n    \"#2980b9\",\n    \"#27ae60\",\n    \"#ef8717\",\n    \"#7f8c8d\"\n]\n\nconst averageColor = \"#e74c3c\"\n\nlet colorCounter = 0\n\nconst monthNames = [\"JAN\", \"FEB\", \"MAR\", \"APR\", \"MAY\", \"JUN\",\n\"JUL\", \"AUG\", \"SEP\", \"OCT\", \"NOV\", \"DEC\"\n]\n\nconst averageCharacterWidth = 5.5\nconst constantCharacterPadding = 20\n\nclass Visualizer extends Component {\n\n    getNextColor = () => {\n        let color = strokeColors[colorCounter]\n        colorCounter = (colorCounter + 1) % strokeColors.length\n        return color\n    }\n\n    resetColor = () => {\n        colorCounter = 0\n    }\n\n    startDate = null\n\n    mockMetric = {\n        name: \"Male Vaccinations Ages 0-19\",\n        location: {\n            state: \"Ex\",\n            lga: \"Ex\",\n            ward: \"Ex\",\n            facility: \"Ex\",\n        },\n        data: [\n            {\n                Month: 'JAN',\n                Year: 2017,\n                Value: Math.floor(Math.random() * 10)\n            },\n            { Month: 'FEB', Year: 2017, Value: Math.floor(Math.random() * 10) },\n            { Month: 'MAR', Year: 2017, Value: Math.floor(Math.random() * 10) },\n            { Month: 'APR', Year: 2017, Value: Math.floor(Math.random() * 10) },\n            { Month: 'MAY', Year: 2017, Value: Math.floor(Math.random() * 10) },\n            { Month: 'JUN', Year: 2017, Value: Math.floor(Math.random() * 10) },\n            { Month: 'JUL', Year: 2017, Value: Math.floor(Math.random() * 10) },\n            { Month: 'AUG', Year: 2017, Value: Math.floor(Math.random() * 10) },\n            { Month: 'SEP', Year: 2017, Value: Math.floor(Math.random() * 10) },\n            { Month: 'OCT', Year: 2017, Value: Math.floor(Math.random() * 10) },\n            { Month: 'NOV', Year: 2017, Value: Math.floor(Math.random() * 10) },\n            { Month: 'DEC', Year: 2017, Value: Math.floor(Math.random() * 10) },\n            { Month: 'JAN', Year: 2018, Value: Math.floor(Math.random() * 10) },\n            { Month: 'FEB', Year: 2018, Value: Math.floor(Math.random() * 10) },\n            { Month: 'MAR', Year: 2018, Value: Math.floor(Math.random() * 10) },\n            { Month: 'APR', Year: 2018, Value: Math.floor(Math.random() * 10) },\n            { Month: 'MAY', Year: 2018, Value: Math.floor(Math.random() * 10) },\n            { Month: 'JUN', Year: 2018, Value: Math.floor(Math.random() * 10) },\n            { Month: 'JUL', Year: 2018, Value: Math.floor(Math.random() * 10) },\n            { Month: 'AUG', Year: 2018, Value: Math.floor(Math.random() * 10) },\n            { Month: 'SEP', Year: 2018, Value: Math.floor(Math.random() * 10) },\n            { Month: 'OCT', Year: 2018, Value: Math.floor(Math.random() * 10) },\n            { Month: 'NOV', Year: 2018, Value: Math.floor(Math.random() * 10) },\n            { Month: 'DEC', Year: 2018, Value: Math.floor(Math.random() * 10) },\n        ]\n    }\n\n    mockSet = {\n        name: \"Male Vaccinations\",\n        startDate: \"\",\n        endDate: \"\",\n        location: {\n            state: \"Ex\",\n            lga: \"Ex\",\n            ward: \"Ex\",\n            facility: \"Ex\",\n        },\n        data: [\n            {\n                Value: Math.floor(Math.random() * 10),\n                Metric: \"Male Vaccinations 0-10\"\n            },\n            { Value: Math.floor(Math.random() * 10), Metric: \"Male Vaccinations 10-40\" },\n            { Value: Math.floor(Math.random() * 10), Metric: \"Male Vaccinations 40-80\" },\n            { Value: Math.floor(Math.random() * 10), Metric: \"Male Vaccinations 80+\" },\n        ]\n    }\n\n    mockGroup = {\n        data:[\n            [\n                { Value: 1, Metric: \"Metric1\" },\n                { Value: 2, Metric: \"Metric2\" },\n                { Value: 3, Metric: \"Metric3\" },\n                { Value: 4, Metric: \"Metric4\" },\n            ],\n            [\n                { Value: 2, Metric: \"Metric1\" },\n                { Value: 3, Metric: \"Metric2\" },\n                { Value: 4, Metric: \"Metric3\" },\n                { Value: 5, Metric: \"Metric4\" },\n            ],\n            [\n                { Value: 3, Metric: \"Metric1\" },\n                { Value: 4, Metric: \"Metric2\" },\n                { Value: 5, Metric: \"Metric3\" },\n                { Value: 6, Metric: \"Metric4\" },\n            ],\n        ],\n        legendTitles:[\n            \"Location 1\",\n            \"Location 2\",\n            \"Location 3\"\n        ]\n    }\n\n    createMultipleBarSeries() {\n        let data = this.props.data.data || this.mockGroup.data \n\n        //Update Default Padding\n        let maxLength = 0\n        for (let i = 0; i < data.length; i++) {\n            for (let j = 0; j < data.length; j++) {\n                if (data[i][j].Metric.length > maxLength) maxLength = data[i][j].Metric.length\n            }\n        }\n        this.defaults.barChartLeftMargin = Math.round(maxLength * averageCharacterWidth + constantCharacterPadding, 0)\n\n        let result = {\n            barSeries: [],\n            legend: null,\n            lineData: null\n        }\n\n        for (let i = 0; i < data.length; i++){\n            //For each Location:\n            \n            //Create the bars in each of the same metric\n            let group = []\n            for (let j = 0; j < data[i].length; j++){\n                group.push({\n                    y: data[0][j].Metric, x: data[i][j].Value\n                })\n            }\n\n            result.barSeries.push(\n                <HorizontalBarSeries key={i} data={group} color={this.getNextColor()} />\n            )\n\n        }\n\n        //Push all the legend names in\n        this.resetColor()\n        \n        var legend = [];//this.props.data.legendTitles;\n        for (let i = 0; i < this.props.data.legendTitles.length; i++){\n            legend.push({ title: this.props.data.legendTitles[i], color: this.getNextColor() })\n        }\n\n        result.legend = <DiscreteColorLegend orientation=\"horizontal\" items={legend} />\n        return result\n\n    }\n\n    MultipleBar() {\n        let data = this.createMultipleBarSeries()\n\n        return (\n            <div className=\"center\">\n                <FlexibleWidthXYPlot yType=\"ordinal\" height={this.defaults.height} margin={{ left: this.defaults.barChartLeftMargin }}>\n                    <HorizontalGridLines />\n                    <XAxis />\n                    <YAxis />\n                    {data.barSeries}\n                </FlexibleWidthXYPlot>\n                {data.legend}\n            </div>\n\n        )\n    }\n\n    createHistogramData(){\n        let rawData = this.props.data\n        \n        if (rawData.length === 0){\n            return null\n        }\n\n        let redundantTitle = rawData.name.replace(\"All \", \"\").trim()\n    \n        rawData.data.forEach(el => {\n            if (typeof el.Metric === 'string'){\n                //Remove 'Facility Attendance' from Facility Attendance Outpatient and Facility Attendance Male\n                el.Metric = el.Metric.replace(`${redundantTitle}, `,\"\")\n                //Remove 'Facility Attendance Male from 'Facility Attendance Male, 20 years and above'\n                el.Metric = el.Metric.replace(`${redundantTitle}`,\"\").trim()\n            }\n        })\n\n        //Update Default Padding\n        let maxLength = 0\n        for (let i = 0; i < rawData.data.length; i++){\n            if ((\"\"+rawData.data[i].Metric).length > maxLength) maxLength = (\"\"+rawData.data[i].Metric).length\n        }\n        this.defaults.barChartLeftMargin = Math.round(maxLength * averageCharacterWidth + constantCharacterPadding,0)\n        let barSeriesData = this.createBarSeriesData(rawData)\n        return {\n            barSeries: barSeriesData.barSeries,\n            legend: barSeriesData.legend,\n            averageLine: this.createBarSeriesAverage(rawData)\n        }\n    }\n\n    createBarSeriesData = (rawData) => {\n        let color = this.getNextColor()\n        let map = rawData.data.filter(element => {\n            return !(typeof element.Metric === 'string' && element.Metric.length === 0)\n        }).map(element => {\n            return { y: element.Metric, x: element.Value }\n        })\n\n        return ({\n            barSeries: <HorizontalBarSeries data={map} color={color} />,\n            legend: <DiscreteColorLegend orientation=\"horizontal\" items={[{ title: rawData.name, color: color }, { title: \"Average\", color: averageColor }]} />\n        })\n    }\n\n    createBarSeriesAverage = (rawData) => {\n        let data = rawData.data.filter(element => {\n            return !(typeof element.Metric === 'string' && element.Metric.length === 0)\n        })\n\n        let sum = 0\n        let count = 0\n\n        data.forEach(el => {\n            sum += el.Value\n            count++\n        })\n       \n        let average = count > 0 ? sum / count : 0\n        let lineData = data.map(element => {\n            return { y: element.Metric, x: average }\n        })\n        return (<LineSeries data={lineData} strokeDasharray={[7, 5]} color={averageColor} />)\n    }\n\n    Histogram() {\n        let data = this.createHistogramData()\n        if (data === null){\n            return(\n                <div>\n                    empty\n                </div>\n            )\n        }\n\n        return (\n            <div className=\"center\">\n                <FlexibleWidthXYPlot yType=\"ordinal\" height={this.defaults.height} margin={{ left: this.defaults.barChartLeftMargin }}>\n                    <HorizontalGridLines />\n                    <VerticalGridLines />\n                    <XAxis />\n                    <YAxis />\n                    {data.barSeries}\n                    {data.averageLine}\n                </FlexibleWidthXYPlot>\n                {data.legend}\n            </div>\n        )\n    }\n\n    /**\n     * Return an object containing an array of LineSeries (max 12 months)\n     * and one legend \n     */\n    createLineSeriesWithLegend() {\n\n        let elements = {\n            legend: null,\n            series: []\n        }\n\n        let dataForYear = []\n        let legend = []\n        let sum = 0\n        let count = 0\n\n        let data = this.props.data.data || this.mockMetric.data\n        \n        if (data.length === 0) return null\n        if (data[0].hasOwnProperty(\"Date\") === false){\n            data.forEach(el =>{\n                el.Date = new Date(el.Time)\n                el.Value = Number.parseInt(el.Value)\n            })\n\n            data.sort((a,b)=>{\n                return a.Date - b.Date\n            })\n        }\n\n        let currentYear = null \n\n        //Create a transparent line series with the correct month order\n        //to initialize the x-axis. This is necessary because sometimes\n        // the data has no values for consecutive months.\n\n        let blankData = []\n        for (let i = 0; i < monthNames.length; i++){\n            blankData.push({\n                x: monthNames[i],\n                y: 0\n            })\n        }\n        let blankDataSeries =  <LineMarkSeries key={-1} data={blankData} color=\"transparent\" colorType=\"literal\"/>\n        elements.series.push(blankDataSeries)\n\n        //Create a LineMarkSeries for each year.\n\n        for (let i = 0; i < data.length; i++) {\n\n            if (currentYear === null){\n                currentYear = data[i].Date.getUTCFullYear()\n            }\n\n            //Create data for the year\n            dataForYear.push({\n                x: monthNames[data[i].Date.getUTCMonth()],\n                y: data[i].Value\n            })\n\n            //Add to Average Calculation\n            sum += data[i].Value\n            count++\n\n            //With 12 data points OR at end of data set, create a LineMarkSeries\n            if (i === (data.length - 1) || data[(i + 1)].Date.getUTCFullYear() !== currentYear) {\n                let color = this.getNextColor()\n\n                elements.series.push(\n                    <LineMarkSeries key={i} data={dataForYear} color={color} colorType=\"literal\"/>\n                )\n\n                let title = `${currentYear}`\n\n                //Add legend entry for LineMarkSeries\n                legend.push({\n                    title: title,\n                    color: color\n                })\n\n                //Reset\n                dataForYear = []\n                if (i !== (data.length -1)) currentYear = data[(i + 1)].Date.getUTCFullYear()\n            }\n        }\n\n        //Add Average line\n        let marks = []\n        let average = count > 0 ? sum / count : 0\n        for (let i = 0; i < monthNames.length; i++){\n            marks.push({\n                x: monthNames[i],\n                y: average\n            })\n        }\n        \n        //Add legend entry for Average\n        legend.push({\n            title: \"Average\",\n            color: averageColor\n        })\n\n        elements.series.push(<LineSeries key={elements.length + 1} data={marks} strokeDasharray={[7, 5]} color={averageColor} colorType=\"literal\" />)\n\n        //Create legend\n        let legendElement = <DiscreteColorLegend orientation=\"horizontal\" items={legend}/>\n        elements.legend = legendElement\n\n        return elements\n\n    }\n\n    Line() {\n\n        let elements = this.createLineSeriesWithLegend()\n\n        if (elements === null){\n            return(\n                <div className=\"graphPlaceholder\">\n                    <Empty\n                        description=\"Hmm.. we can't find any data\"\n                    />\n                </div>\n            )\n        }else{\n            return (\n                <div className=\"center\">\n                    <FlexibleWidthXYPlot xType=\"ordinal\" height={this.defaults.height} >\n                        <HorizontalGridLines />\n                        <VerticalGridLines />\n                        <XAxis />\n                        <YAxis />\n                        {elements.series}\n                    </FlexibleWidthXYPlot>\n                    {elements.legend}\n                </div>\n            )\n        }\n\n\n    }\n\n    renderGraph = () =>{\n\n        let graph = null\n        switch (this.props.type) {\n            case \"Group\":\n                graph = this.MultipleBar()\n                break\n            case \"Set\":\n                graph = this.Histogram()\n                break\n            case \"Metric\":\n                graph = this.Line()\n                break\n            default:\n                graph = null\n                break\n        }\n        return graph\n    }\n\n    defaults = {\n        width: 350,\n        height: 350,\n        xDistance: 100,\n        barChartLeftMargin: 175\n    }\n\n    render() {\n\n        \n        if (this.props.show === false) return null\n\n        colorCounter = 0\n        //Override Defaults where appropriate\n        Object.keys(this.defaults).forEach((key) => {\n            if (this.props[key] !== undefined) this.defaults[key] = this.props[key]\n        });\n\n\n        let graph = this.renderGraph()\n        if (graph !== null) {\n            return <div>{graph} <span></span></div>\n\n        } else {\n            return (\n                <div>\n                    Sorry, something went wrong.\n                </div>\n            )\n        }\n\n    }\n}\n\nexport default Visualizer;\n","import Dexie from 'dexie'\n\nconst db = new Dexie('ESSD_DB')\n\ndb.version(1).stores({\n    //Locations\n    Facility:\"Id,parentId\",\n    Ward:\"Id,parentId\",\n    LGA:\"Id,parentId\",\n    State:\"Id\",\n\n    //Data\n    Groups:\"Id\",\n    Sets:\"Id,parentId\",\n    Metrics:\"Id,parentId\",\n    Data:\"Id,Time,MetricId,FacilityId,[FacilityId+MetricId+Time]\", //Index everything here\n\n    //Users (all of ESSD)\n    User:\"Id\",   // only store non-essential information\n\n    //User (local)\n    LocalUser: \"Id\",\n    Dashboard:\"Id\",\n    DashboardData: \"Id\"\n\n})\n\nexport default db;","import React, { Component } from 'react';\n\n//react-vis for graphs\nimport '../../node_modules/react-vis/dist/style.css';\n\nimport {Empty, Spin} from 'antd'\n\nimport Visualizer from './Visualizer'\n\nimport db from '../Database/database'\n\n/**\n * Types of Graphs Generated:\n * \n * Data: Metric\n * Location: Any (Note: Location is always ANY because we're not going to show breakdown by location; too many locations)\n * Time Period: Any\n *      -> Line Graph\n *      -> X-Axis is monthly if startDate.year == endDate.year; otherwise yearly\n * \n * Data: Set or Group\n * Location: Any\n * Time Period: Any\n * Period: Any\n * Type: Distribution\n *      -> Show Horizontal Bar Graph of the set or the group\n * \n * Data: Set or Group\n * Location: Any\n * Time Period: Any\n * Period: Any\n * Type: Total\n *      -> Show Line Graph of the Set or Group\n * \n */\n\n/**\n * PROPS:\n * @param LocationId: String\n * @param LocationType: String \"National\" | \"State\" | \"LGA\" | \"Ward\" | \"Facility\"\n * @param DataId: String\n * @param DataType: String \"Metric\" | \"Set\" | \"Group\"\n * @param StartDate: Date\n * @param EndDate: Date (if applicable)\n */\nclass VisualizerManager extends Component {\n\n    state = {\n        ready: false,\n        data: null,\n    }\n\n    checkInputs = () => {\n        let valid = true\n        let validInputs = {\n            \"LocationId\": value => {return value !== undefined && value !== null},\n            \"LocationType\": value => {return [\"National\", \"State\", \"LGA\", \"Ward\", \"Facility\"].includes(value)},\n            \"DataId\": value => {return value !== undefined && value !== null},\n            \"DataType\": value => {return [\"Metric\", \"Set\", \"Group\"].includes(value)},\n            \"StartDate\": value => {return Object.prototype.toString.call(value) === '[object Date]'},\n            \"EndDate\": value => {return Object.prototype.toString.call(value) === '[object Date]'}, \n        }\n\n        for (var key in validInputs){\n            if (validInputs[key](this.state[key]) === false){\n                valid = false\n                break\n            }\n        }\n    \n        return valid\n    }\n\n    isSimpleData = () =>{\n        //Simple data is only Facility, Metric \n        //All other data requires aggregation and therefore will be queried from the database.\n        if (this.state.LocationType !== \"Facility\") return false\n        if (this.state.DataType !== \"Metric\") return false\n        return true\n    }\n\n    /**\n     * @param date Date object\n     */\n    formatDate = (date) =>{\n        //Format into YYYY-MM-DDT:00:00:00.000Z\n        let dateString = `${date.getUTCFullYear()}-${(\"0\" + (date.getUTCMonth()+1)).slice(-2)}-${(\"0\" + date.getUTCDate()).slice(-2)}T00:00:00.000Z`\n        return dateString\n    }\n\n    /**\n     * Preconditions:\n     * locationType === \"Facility\"\n     * dataType === \"Metric\"\n     */\n    getSimpleData = () =>{\n        db.Data.where(\n            [\"FacilityId\", \"MetricId\", 'Time']\n        ).between(\n            [this.state.LocationId, this.state.DataId, this.formatDate(this.state.StartDate)],\n            [this.state.LocationId, this.state.DataId, this.formatDate(this.state.EndDate)],\n            true,\n            true\n        )\n        .toArray((arr) =>{\n            this.setState({\n                data: {\n                    data: arr\n                },\n                graphType :\"Metric\",\n                ready: true\n            })\n        })\n    }\n\n    /**\n     * 1. Try to find data from local store\n     * 2. If not possible, try to find data from internet\n     *     - If exists, cache\n     * 3. If not, some error message\n     */\n    getComplexData = () =>{\n        if (this.props.RawData){\n            let graphType = \"Metric\"\n            if (this.props.Data.MetricValue !== undefined && this.props.Data.MetricValue.charAt(0)!== \"-\") graphType = \"Metric\" \n            else if (this.props.Data.SetValue !== undefined) graphType = \"Set\"\n            else graphType = \"Group\"    \n            this.setState({\n                ready: true,\n                data:{\n                    data: this.props.RawData,\n                    name: this.props.Title\n                },\n                graphType: graphType\n            })\n        }else{\n            this.queryComplexData()\n        }\n    }\n\n    formatDateForRemoteQuery = (date) =>{\n        return `${date.getUTCFullYear()}-${(\"0\" + (date.getUTCMonth()+1)).slice(-2)}-${(\"0\" + date.getUTCDate()).slice(-2)}`\n    }\n\n    queryComplexData = () =>{\n    \n        //Build Query URL\n        let period = \"month\"\n        \n        if (this.state.StartDate.getUTCFullYear() !== this.state.EndDate.getUTCFullYear()) period = \"year\"\n        let rootURL = `https://essd-backend-dev.azurewebsites.net/api/data/query?`\n        let url = rootURL + \n                \"LocationId=\" + this.state.LocationId\n            +   \"&LocationType=\" + this.state.LocationType\n            +   \"&DataId=\" + this.state.DataId\n            +   \"&DataType=\" + this.state.DataType\n            +   \"&StartDate=\" + this.formatDateForRemoteQuery(this.state.StartDate)\n            +   \"&EndDate=\" + this.formatDateForRemoteQuery(this.state.EndDate)\n            +   \"&Period=\" + period\n            +   \"&Distribution=\" + this.state.DataPresentation\n\n        console.log(url)\n\n        //Data comes back as an array\n        fetch(url,{}).then(stream => stream.json().then(result =>{\n\n            if (period === \"year\"){\n\n                //TODO: Switch to vertical bar graph in the future\n                result.forEach(el =>{\n                    el.Value = Number.parseFloat(el.Total)\n                })\n\n                result.sort((a,b) =>{\n                    return a.Metric - b.Metric\n                })\n                \n                //If this spans multiple years, always display it as a bar chart\n                this.setState({\n                    ready: true,\n                    data: {\n                        data: result,\n                        name: this.state.Title\n                    },\n                    graphType: \"Set\",\n                })\n            }else{\n                //Period === month\n                let graphType = this.state.DataPresentation === \"distribution\" ? \"Set\" : \"Metric\"\n\n                let groupName = \"Metric\"\n                // if (result.length > 0) groupName = result[0].hasOwnProperty(\"MetricName\") ? \"MetricName\" : \"SetName\"\n\n                let titleIndex = undefined\n\n                for (let i = 0; i < result.length; i++){\n                    let d = new Date(this.state.StartDate)\n                    d.setUTCMonth(result[i].Month - 1)\n                    result[i].Date = d\n                    result[i].Value = Number.parseInt(result[i].Total)\n                    if (graphType === \"Set\"){\n                        if (result[i][groupName] === this.state.Title) titleIndex = i\n                        result[i].Metric = result[i][groupName].replace(`${this.state.Title}, `, \"\")\n                    }else{\n                        result[i].Metric = result[i][groupName]\n                    }\n                }\n\n                if (titleIndex !== undefined){\n                    result.splice(titleIndex,1)\n                }\n \n                this.setState({\n                    ready: true,\n                    graphType: graphType,\n                    data: {\n                        data: result,\n                        name: this.state.Title\n                    }\n                })\n\n            }\n\n            if (this.props.ParentHandler) this.props.ParentHandler(result)\n\n            //TODO: store data locally\n        }))\n    \n    }\n\n    componentDidUpdate(prevProps){\n        if (prevProps.Location !== this.props.Location || prevProps.Data !== this.props.Data || prevProps.Dates !== this.props.Dates){\n            this.setStateFromProps(this.run)\n        }\n    }\n\n    setStateFromProps = (callback) =>{\n        if (this.props.Title){\n            this.setState({\n                Title: this.props.Title,\n                LocationName: this.props.Location ? this.props.Location.Name : undefined,\n                LocationId: this.props.Location ? this.props.Location.Id : undefined,\n                LocationType: this.props.Location ? this.props.Location.Type : undefined,\n                DataId: this.props.Data ? this.props.Data.Id : undefined,\n                DataType: this.props.Data ? this.props.Data.Type : undefined,\n                DataPresentation: this.props.Data ? this.props.Data.TotalOrDistribution : undefined,\n                StartDate: this.props.Dates ? new Date(this.props.Dates.StartDate) : undefined,\n                EndDate: this.props.Dates ? new Date(this.props.Dates.EndDate) : undefined,\n            }, () =>{\n                if (callback) callback()\n            })\n        }else{\n            if (callback) callback()\n        }\n\n    }\n\n    run = () => {\n        if (this.checkInputs()){\n            if (this.isSimpleData()){\n                this.getSimpleData()\n            }else{\n                this.getComplexData()\n            }\n        }\n    }   \n\n    componentDidMount(){\n        this.setStateFromProps(this.run)\n    }\n\n    render() {\n        if (this.checkInputs()){\n            return (\n                <div>\n                    {\n                        this.state.ready === false && \n                        <div className=\"graphPlaceholder\">\n                            <Spin></Spin>\n                        </div>\n                        \n                    }\n                    {\n                        this.state.ready === true && \n                        <div>\n                            <Visualizer \n                                type = {this.state.graphType}\n                                show = {this.props.show}\n                                data = {this.state.data}\n                            />\n\n                        </div>\n\n                    }\n                </div>\n            )\n        }else{\n            return(\n                <div className=\"graphPlaceholder\">\n                    <Empty\n                        description=\"We can't display a graph with these inputs.\"\n                    />\n                </div>)\n        }\n    }\n}\n\nexport default VisualizerManager;\n","import React, { Component } from 'react';\n\nimport {Select} from 'antd'\n\nimport db from '../Database/database'\n\nconst hierarchyLevels = [\n    \"National\",\n    \"State\",\n    \"LGA\",\n    \"Ward\",\n    \"Facility\"\n]\n\nconst Option = Select.Option;\n\nconst style = {\n    width: \"100%\"\n}\n\n/**\n * Selects a loction in Nigeria\n * @param {parentHandler} - Function passed in by the parent that takes a LocationObject with props {Id, Name, Type} and updates the parent UI\n * @param {showLocation} - Boolean that shows or hides LocationSelector's built-in selected location text\n * @param {maxScope}: optional - {Id: \"188\", Level: \"State\"}\n * @param {initialLocation}\n */\nclass LocationSelector extends Component {\n\n    findAllLocations = (type) => {\n        return new Promise((resolve) =>{\n            //Cannot access type via db[type], so we have to do it manually\n            let callback = (data) => {\n                resolve (data) \n            }\n\n            switch(type){\n                case \"Facility\":\n                    db.Facility.toArray(callback)\n                break\n                case \"Ward\":\n                    db.Ward.toArray(callback)\n                break\n                case \"LGA\":\n                    db.LGA.toArray(callback)\n                break\n                case \"State\":\n                    db.State.toArray(callback)\n                break\n                default:\n                    //\n                break;\n            }\n        })\n    }\n\n    findLocationByQuery(type, queryParams){\n        return new Promise((resolve) =>{\n            //Cannot access type via db[type], so we have to do it manually\n            let callback = (data) => {\n                resolve (data) \n            }\n            switch(type){\n                case \"Facility\":\n                    db.Facility.where(queryParams).toArray(callback)\n                break\n                case \"Ward\":\n                    db.Ward.where(queryParams).toArray(callback)\n                break\n                case \"LGA\":\n                    db.LGA.where(queryParams).toArray(callback)\n                break\n                case \"State\":\n                    db.State.where(queryParams).toArray(callback)\n                break\n                default:\n                    //\n                break;\n            }\n        })\n    }\n\n    state = {\n\n        //Selected locations at each level\n        National: \"1|Nigeria|National\" ,\n        State:undefined,\n        LGA:undefined,\n        Ward:undefined,\n        Facility:undefined,\n\n        //Selection lists to show at each level\n        StateList: undefined,\n        LGAList: undefined,\n        WardList:undefined,\n        FacilityList:undefined,\n\n        //Enables / disables each list\n        enabledDisabledLists:{\n            \"National\"  : false,\n            \"State\"     : false,\n            \"LGA\"       : false,\n            \"Ward\"      : false,\n            \"Facility\"  : false\n        },\n\n        selectedLocation: \"1|Nigeria|National\"\n    }\n\n    componentDidUpdate = async (oldProps) => {\n        \n        if (oldProps.disabled !== this.props.disabled) this.enableDisableLists()\n\n        //No need to update for maxScope; this should not change unless the admin user has changed\n\n        //In the future, this can be updated to also change the user shown\n        //when the prop changes to allow React to persist a LocationSelector\n        //in the DOM, but this is tricky because it also requires LocationSelector\n        //to revert the selected location when editing is cancelled.\n    }\n\n    componentWillMount = () =>{\n        this.setLocations()\n    }\n\n    findIndexForLocationType = (locationType) =>{\n        return hierarchyLevels.findIndex((el) => {\n            return el === locationType\n        })\n    }\n\n    setLocations = async () =>{\n        /**\n         * Preconditions:\n         *  - initialLocation is within maxScope\n         *  - maxScope must be higher or equal to initialLocation\n         */\n        let maxScope = {\n            Type:  this.props.maxScope ? this.props.maxScope.Type : \"National\",\n            Id:     this.props.maxScope ? this.props.maxScope.Id : \"1\",\n        }\n        console.log(this.props.initialLocation);\n        let initialLocation = {\n            Type:  this.props.initialLocation.Type ? this.props.initialLocation.Type : maxScope.Type,\n            Id:     this.props.initialLocation.Id ? this.props.initialLocation.Id : maxScope.Id,\n        }\n\n        this.setState({\n            maxScope: maxScope,\n            initialLocation: initialLocation\n\n        }, () =>{\n            console.log(this.state);\n            let initLocationIndex = this.findIndexForLocationType(initialLocation.Type)\n\n            //Work backwards to define all the locations that the initial location belongs to\n    \n            let locations = {\n                \"National\"  : \"1|Nigeria|National\",\n                \"State\"     : undefined,\n                \"LGA\"       : undefined,\n                \"Ward\"      : undefined,\n                \"Facility\"  : undefined\n            }\n            \n            this.getLocationHierarchyForInitLocation(initLocationIndex, initialLocation.Id, this.setLocationState, locations)\n        })\n\n\n    }\n\n    getLocationHierarchyForInitLocation = async (currentIndex, currentLocationId,completionCallback, locations) =>{\n        if (currentIndex === 0){\n            completionCallback(locations)\n            return\n        }else{\n            console.log(currentLocationId)\n            let location = await (this.findLocationByQuery(hierarchyLevels[currentIndex], {Id:currentLocationId}))\n            console.log(location)\n            location = location[0]\n            locations[hierarchyLevels[currentIndex]] = `${location.Id}|${location.Name}|${hierarchyLevels[currentIndex]}`\n            this.getLocationHierarchyForInitLocation(currentIndex-1, location.parentId, completionCallback, locations)\n        }\n    }\n\n    setLocationState = (data) =>{\n        this.setState({...data}, () =>{\n            this.notifyParent()\n            //Then update lists for each level that is defined, plus the first undefined level\n            for (let i = 0; i < hierarchyLevels.length; i++){\n                this.updateList(hierarchyLevels[i], i, () =>{})\n            }\n            this.enableDisableLists()\n        })\n    }\n\n    enableDisableLists = () =>{\n\n        let maxScope = this.state.maxScope\n        let enabledDisabledLists = {}\n\n        //Disable all fields if global state is disabled\n        if (this.props.disabled === true){\n            for (let i = 0; i < hierarchyLevels.length; i++){\n                enabledDisabledLists[hierarchyLevels[i]] = true\n            }\n        }else{\n            let disabled = true\n            for (let i = 0; i < hierarchyLevels.length; i++){\n                //Disable all levels above maxScope.Level, including maxScope\n                enabledDisabledLists[hierarchyLevels[i]] = disabled\n    \n                //Enable all levels after maxScope.Level\n                if (hierarchyLevels[i] === maxScope.Type) disabled = false\n            }\n        }\n        this.setState({enabledDisabledLists: enabledDisabledLists})\n    }\n\n    handleChange = (level, value) =>{\n        //Find Current Level\n        let currentLevelIndex = this.findIndexForLocationType(level)\n        let currentLevel = level\n\n        //If value is undefined, then Select was cleared so the current Level is one above this level\n        if (value === undefined || this.parseLocation(value).Id === \"-1\"){\n            currentLevel = hierarchyLevels[currentLevelIndex - 1]  \n            this.setState({[level]: undefined, selectedLocation:this.state[currentLevel]}, () =>{\n                this.notifyParent()\n            })\n        }else{\n            //Update Select\n            this.setState({[level]: value, selectedLocation:value},  () =>{\n                this.notifyParent()\n            })\n        }\n        \n        //Whenever the value has changed, all the subordinate options have been invalidated \n        for (let i = currentLevelIndex + 1; i < hierarchyLevels.length; i++){\n            let statePropertyName = hierarchyLevels[i]\n            const x = i\n            this.setState({[statePropertyName]: undefined}, () =>{\n                this.updateList(statePropertyName, x)\n            })\n        }\n    }\n\n    updateList = async (level, levelIndex, callBack) => {\n        \n        let list = []\n        let listName = `${level}List`                       //E.g. We will be updating this.state.FacilityList\n        let queryProperty = hierarchyLevels[levelIndex]      //eg level = lga but we need 'LGA' for data.LGA\n\n        //States are special because they don't require a nation lookup\n        if (level === \"State\"){\n            list = await this.findAllLocations(level)\n        }else{\n            levelIndex = hierarchyLevels.findIndex((el) => {return el === level})\n\n            queryProperty = hierarchyLevels[levelIndex] //eg level = lga, queryProperty = LGA\n            let aboveLevel = hierarchyLevels[levelIndex-1]\n            if (this.state[aboveLevel] === undefined){\n                //Short circuit if the above level is undefined\n                this.setState({[listName]: []})\n                return\n            }else{\n                let aboveLevelId = this.parseLocation(this.state[aboveLevel]).Id\n                list = await this.findLocationByQuery(queryProperty,{parentId: aboveLevelId})\n            }\n        }\n\n        let optionsList = []\n         //Add a clear option to the front of the array (mobile users won't see the clear button)\n\n        optionsList.push(\n            <Option key = {-1} value = \"-1||\"><em>Clear Selection</em></Option>\n        )\n\n        //Add the remaining objects\n        list.forEach((el)=>{\n            optionsList.push(\n                <Option key = {el.Id} value = {`${el.Id}|${el.Name}|${level}`}>{el.Name}</Option>\n            )\n        })\n        \n        if (optionsList.length > 0){\n            this.setState({[listName]: optionsList})\n        }\n\n        if (callBack) callBack()\n    }\n\n    parseLocation (value) {\n        if (value === undefined) return {\n            Id:\"\",Name:\"\",Type:\"\"\n        }\n        let valueArr = value.split(\"|\")\n        return{\n            Id:     valueArr[0],\n            Name:   valueArr[1],\n            Type:  valueArr[2]\n        }\n    }\n\n    notifyParent = () =>{\n        if (this.props.parentHandler !== undefined && this.props.parentHandler !== null){\n            let location = undefined\n            for (let i = hierarchyLevels.length-1; i >=0 ; i--){\n                if (this.state[hierarchyLevels[i]] !== undefined){\n                    location = this.state[hierarchyLevels[i]]\n                    break\n                }\n            }\n            this.props.parentHandler(this.parseLocation(location))\n        }\n    }\n\n    render() {\n        return (\n           <div>\n               <Select\n                    style={style}\n                    placeholder=\"Country\"\n                    optionFilterProp=\"children\"\n                    defaultValue = \"Nigeria\"\n                    disabled\n                >\n                    <Option value=\"Nigeria\">Nigeria</Option>\n                </Select>\n                <br/>\n                <Select\n                    showSearch\n                    style={style}\n                    placeholder=\"State\"\n                    optionFilterProp=\"children\"\n                    value = {this.state.State}\n                    onChange={(value) => {this.handleChange(\"State\", value)}}\n                    disabled = {this.state.enabledDisabledLists.State}\n                    // filterOption={(input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n                >\n                    {this.state.StateList}\n                </Select>\n                <br/>\n                <Select\n                    // showSearch\n                    style={style}\n                    placeholder=\"LGA\"\n                    optionFilterProp=\"children\"\n                    value = {this.state.LGA}\n                    onChange={(value) => {this.handleChange(\"LGA\", value)}}\n                    disabled = {this.state.enabledDisabledLists.LGA}\n                    // filterOption={(input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n                >\n                    {this.state.LGAList}\n                </Select>\n                <br/>\n                <Select\n                    // showSearch\n                    style={style}\n                    placeholder=\"Ward\"\n                    optionFilterProp=\"children\"\n                    value = {this.state.Ward}\n                    onChange={(value) => {this.handleChange(\"Ward\", value)}}\n                    disabled = {this.state.enabledDisabledLists.Ward}\n                    // filterOption={(input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n                >\n                    {this.state.WardList}\n                </Select>\n                <br/>\n                <Select\n                    // showSearch\n                    style={style}\n                    placeholder=\"Facility\"\n                    optionFilterProp=\"children\"\n                    value = {this.state.Facility}\n                    onChange={(value) => {this.handleChange(\"Facility\", value)}}\n                    disabled = {this.state.enabledDisabledLists.Facility}\n                    // filterOption={(input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n                >\n                    {this.state.FacilityList}\n                </Select>\n                <br/>\n                <div hidden = {!this.props.showLocation}>\n                    <p>\n                        Selected Location: {`${this.parseLocation(this.state.selectedLocation).Name} (${this.parseLocation(this.state.selectedLocation).Type})`}\n                    </p>\n                </div>\n               \n           </div>\n        );\n    }\n}\n\nexport default LocationSelector;\n","import React, { Component } from 'react';\n\nimport {Select} from 'antd'\n\nimport db from '../Database/database'\n\nconst hierarchyLevels = [\n    \"Group\",\n    \"Set\",\n    \"Metric\",\n]\n\nconst Option = Select.Option;\n\nconst style = {\n    width: \"100%\"\n}\n\n/**\n * Selects a loction in Nigeria\n * @param {parentHandler} - Function passed in by the parent that takes a LocationObject with props {Id, Name, Type} and updates the parent UI\n * @param {showData} - Boolean that shows or hides LocationSelector's built-in selected location text\n * @param {initialData} = {GroupValue, SetValue, MetricValue}\n */\nclass MetricSelector extends Component {\n\n    findAll = (type) => {\n        return new Promise((resolve) =>{\n            //Cannot access type via db[type], so we have to do it manually\n            let callback = (data) => {\n                resolve (data) \n            }\n\n            switch(type){\n                case \"Metric\":\n                    db.Metrics.toArray(callback)\n                break\n                case \"Set\":\n                    db.Sets.toArray(callback)\n                break\n                case \"Group\":\n                    db.Groups.toArray(callback)\n                break\n                default:\n                    //\n                break;\n            }\n        })\n    }\n\n    findByQuery(type, queryParams){\n        return new Promise((resolve) =>{\n            //Cannot access type via db[type], so we have to do it manually\n            let callback = (data) => {\n                resolve (data) \n            }\n            switch(type){\n                case \"Metric\":\n                    db.Metrics.where(queryParams).toArray(callback)\n                break\n                case \"Set\":\n                    db.Sets.where(queryParams).toArray(callback)\n                break\n                case \"Group\":\n                    db.Groups.where(queryParams).toArray(callback)\n                break\n                default:\n                    //\n                break;\n            }\n        })\n    }\n\n    state = {\n\n        //Selected values at each level\n        Group:undefined,\n        Set:undefined,\n        Metric:undefined,\n\n        //Selection lists to show at each level\n        GroupList: undefined,\n        SetList: undefined,\n        MetricList:undefined,      \n\n        //Enables / disables each list\n        enabledDisabledLists:{\n            \"Group\"  : false,\n            \"Set\"     : false,\n            \"Metric\"       : false,\n        },\n\n        selectedData: undefined\n    }\n\n    componentDidUpdate = async (oldProps) => {\n        \n        if (oldProps.disabled !== this.props.disabled) this.enableDisableLists()\n\n        //No need to update for maxScope; this should not change unless the admin user has changed\n\n        //In the future, this can be updated to also change the user shown\n        //when the prop changes to allow React to persist a LocationSelector\n        //in the DOM, but this is tricky because it also requires LocationSelector\n        //to revert the selected location when editing is cancelled.\n    }\n\n    componentDidMount = () =>{\n        this.setInitialDataState()\n    }\n\n    findIndexForLocationType = (locationType) =>{\n        return hierarchyLevels.findIndex((el) => {\n            return el === locationType\n        })\n    }\n\n    setInitialDataState = () =>{\n        this.enableDisableLists()\n        if (this.props.initialData === undefined){\n            //If undefined, then only update Group List\n            this.updateList(\"Group\", 0, null)\n            this.notifyParent()\n        }else{\n            this.setState({\n                Group:  this.props.initialData.GroupValue.length > 0    ? this.props.initialData.GroupValue     : undefined,\n                Set:    this.props.initialData.SetValue.length > 0      ? this.props.initialData.SetValue       : undefined,\n                Metric: this.props.initialData.MetricValue.length > 0   ? this.props.initialData.MetricValue    : undefined,\n            }, () =>{\n                this.notifyParent()\n                this.updateList(\"Group\", 0, null)\n                this.updateList(\"Set\", 0, null)\n                this.updateList(\"Metric\", 0, null)\n            })\n        }\n    }\n\n    enableDisableLists = () =>{\n\n        let enabledDisabledLists = {}\n\n        let disabled = this.props.disabled !== undefined ? this.props.disabled : false\n        //Disable all fields if global state is disabled\n        for (let i = 0; i < hierarchyLevels.length; i++){\n            enabledDisabledLists[hierarchyLevels[i]] = disabled\n        }\n        this.setState({enabledDisabledLists: enabledDisabledLists})\n    }\n\n    handleChange = (level, value) =>{\n        //Find Current Level\n        let currentLevelIndex = this.findIndexForLocationType(level)    \n\n        //If value is undefined, then Select was cleared so the current Level is one above this level\n        if (value === undefined || this.parseData(value).Id === \"-1\"){\n            this.setState({[level]: undefined}, () =>{\n                this.createLocationObject()\n                this.notifyParent()\n            })\n        }else{\n            //Update Select\n            this.setState({[level]: value, selectedData:value},  () =>{\n                this.createLocationObject()\n                this.notifyParent()\n            })\n        }\n        \n        //Whenever the value has changed, all the subordinate options have been invalidated \n        for (let i = currentLevelIndex + 1; i < hierarchyLevels.length; i++){\n            let statePropertyName = hierarchyLevels[i]\n            const x = i\n            this.setState({[statePropertyName]: undefined}, () =>{\n                this.updateList(statePropertyName, x)\n                this.createLocationObject()\n            })\n        }\n\n    }\n\n    createLocationObject = () =>{\n\n        let type = undefined, name = undefined, split = undefined\n\n        if (this.state.Metric !== undefined){\n            split = this.state.Metric.split(\"|\")\n            type = split[2]\n            name = split[1]\n        }else if (this.state.Set !== undefined){\n            split = this.state.Set.split(\"|\")\n            type = split[2]\n            name = split[1]\n        }else if (this.state.Group !== undefined){\n            split = this.state.Group.split(\"|\")\n            type = split[2]\n            name = split[1]\n        }\n        \n        let typeID = type !== undefined ? split[0] : undefined\n\n        let totalOrDistribution = \"total\" // Default to total\n\n        if (type !== \"Metric\"){\n            //If this is not a metric and has a total or distribution, we need to find out which one it is\n            let nextType = hierarchyLevels[this.findIndexForLocationType(type) + 1]\n\n            if (this.state[nextType] !== undefined){\n                let nextType = typeID.split(\"-\")\n                typeID = nextType[2]            //Get the ID of the above Set or Group without the -# prefix\n                if (nextType[1] === \"2\"){\n                    totalOrDistribution = \"total\"\n                }else{\n                    totalOrDistribution = \"distribution\"\n                }\n            }\n        }else{\n            totalOrDistribution = \"none\"\n        }\n\n        let result = {\n            Type: type,\n            Id: typeID,\n            Name: name,\n            TotalOrDistribution: totalOrDistribution,\n            GroupValue: this.state.Group,\n            SetValue: this.state.Set,\n            MetricValue: this.state.Metric\n        }\n        \n        return result\n    }\n\n    updateList = async (level, levelIndex, callBack) => {\n        \n        let list = []\n        let listName = `${level}List`                       //E.g. We will be updating this.state.FacilityList\n        let queryProperty = hierarchyLevels[levelIndex]      //eg level = lga but we need 'LGA' for data.LGA\\\n        let aboveLevel = undefined\n\n        //States are special because they don't require a nation lookup\n        if (level === \"Group\"){\n            list = await this.findAll(level)\n        }else{\n            levelIndex = hierarchyLevels.findIndex((el) => {return el === level})\n            queryProperty = hierarchyLevels[levelIndex] //eg level = lga, queryProperty = LGA\n            aboveLevel = hierarchyLevels[levelIndex-1]\n            if (this.state[aboveLevel] === undefined){\n                //Short circuit if the above level is undefined\n                this.setState({[listName]: []})\n                return\n            }else{\n                let aboveLevelId = this.parseData(this.state[aboveLevel]).Id\n                list = await this.findByQuery(queryProperty,{parentId: aboveLevelId})\n            }\n        }\n\n        let optionsList = []\n\n         //Add a clear option to the front of the array (mobile users won't see the clear button)\n        optionsList.push(\n            <Option key = {-1} value = \"-1||\"><em>Clear Selection</em></Option>\n        )\n\n        //Add total and distribution of the above group or set\n        if (level === \"Set\" || level === \"Metric\"){\n            let totalString = `All ${this.state[aboveLevel].split(\"|\")[1]} (Total)`\n            optionsList.push(\n                <Option key = {-1} value = {`-2-${this.state[aboveLevel].split(\"|\")[0]}|${totalString}|${aboveLevel}`}>{totalString}</Option>\n            )\n            let distributionString = `All ${this.state[aboveLevel].split(\"|\")[1]} (Distribution)`\n            optionsList.push(\n                <Option key = {-1} value = {`-3-${this.state[aboveLevel].split(\"|\")[0]}|${distributionString}|${aboveLevel}`}>{distributionString}</Option>\n            )\n        }\n\n        //If the Set Above includes a Total or Distribution, then there are no metrics to show\n        if (level === \"Metric\"){\n            if (this.state[aboveLevel].split(\"|\")[0].charAt(0)  === \"-\"){\n                this.setState({\n                    [listName]: []\n                })\n                return\n            }\n        }\n\n        let aboveName = aboveLevel === undefined ? null : this.state[aboveLevel].split(\"|\")[1]\n        //Add the remaining objects\n        list.forEach((el)=>{\n            //Add to list unless the name is the same as the one above\n            if (aboveName !== el.Name){\n                optionsList.push(\n                    <Option key = {el.Id} value = {`${el.Id}|${el.Name}|${level}`}>{el.Name}</Option>\n                )\n            }\n\n        })\n        \n        if (optionsList.length > 0){\n            this.setState({[listName]: optionsList})\n        }\n\n        if (callBack) callBack()\n    }\n\n    parseData (value) {\n        if (value === undefined) return {\n            Id:\"\",Name:\"\",Type:\"\"\n        }\n        let valueArr = value.split(\"|\")\n        return{\n            Id:     valueArr[0],\n            Name:   valueArr[1],\n            Type:  valueArr[2]\n        }\n    }\n\n    notifyParent = () =>{\n        if (this.props.parentHandler !== undefined && this.props.parentHandler !== null){\n            this.props.parentHandler(this.createLocationObject())\n        }\n    }\n\n    render() {\n        return (\n           <div>\n                <Select\n                    // showSearch\n                    style={style}\n                    placeholder=\"Group\"\n                    optionFilterProp=\"children\"\n                    value = {this.state.Group}\n                    onChange={(value) => {this.handleChange(\"Group\", value)}}\n                    disabled = {this.state.enabledDisabledLists.Group}\n                    // filterOption={(input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n                >\n                    {this.state.GroupList}\n                </Select>\n                <br/>\n                <Select\n                    // showSearch\n                    style={style}\n                    placeholder=\"Set\"\n                    optionFilterProp=\"children\"\n                    value = {this.state.Set}\n                    onChange={(value) => {this.handleChange(\"Set\", value)}}\n                    disabled = {this.state.enabledDisabledLists.Set}\n                    // filterOption={(input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n                >\n                    {this.state.SetList}\n                </Select>\n                <br/>\n                <Select\n                    // showSearch\n                    style={style}\n                    placeholder=\"Metric\"\n                    optionFilterProp=\"children\"\n                    value = {this.state.Metric}\n                    onChange={(value) => {this.handleChange(\"Metric\", value)}}\n                    disabled = {this.state.enabledDisabledLists.Metric}\n                    // filterOption={(input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n                >\n                    {this.state.MetricList}\n                </Select>\n            \n                <br/>\n                <div hidden = {this.props.showLabel !== undefined ? !this.props.showLabel : false}>\n                    <p>\n                        Selected Data: {`${this.createLocationObject().Name} (${this.createLocationObject().Type})`}\n                    </p>\n                </div>\n               \n           </div>\n        );\n    }\n}\n\nexport default MetricSelector;\n","import db from '../Database/database'\n\nconst userService = {\n    login,\n    logout,\n    user,\n}\n\nfunction login(email, password){\n    return new Promise ((resolve, reject) =>{\n        var loginApiRoute = `${process.env.REACT_APP_API_URL}${process.env.REACT_APP_LOGIN_ROUTE}`;\n        fetch(loginApiRoute, {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({Email: email, Password: password})\n        })\n        .then((result) => {\n            return result.json();      \n        })\n        .then((userJsonObj) => {\n            if(userJsonObj.success){\n                //Successfully logined, so store in user info LocalUser and resolve promise to true\n                db.LocalUser.clear().then(\n                    db.LocalUser.add(userJsonObj.user).then(() =>{\n                        console.log(\"Auth Login Success\");\n                        resolve (true)\n                    })\n                ).catch((e) =>{\n                    //failed to save to LocalUser\n                    console.log(e);\n                    resolve(false);\n                });\n            }\n            else{\n                //failed to login, so resolve promise to false\n                resolve(false);\n            }\n        });\n    });\n}\n\nfunction logout(){\n    return new Promise ((resolve, reject) =>{\n        db.Dashboard.clear().then(()=>{\n            \n        })\n        db.LocalUser.clear().then(() => {\n            resolve (true)\n        }).catch((e) =>{\n            console.log(e)\n            resolve(false)\n        })\n\n\n    })\n}\n\n/**\n * Determines if there is a user logged in. \n * Returns null if no user; returns the user if logged in.\n */\nfunction user(){\n    return new Promise ((resolve, reject) =>{\n        db.LocalUser.toArray(arr =>{\n            if (arr.length !== 1) resolve(null)\n            else{\n                let result = arr[0]\n                //result.UserType = \"admin\" //hard code for now\n                resolve(result)\n            }\n        })\n    })\n}   \n\n/**\n * Drop-in authenticated replacement for fetch.\n * Includes required auth tokens.\n * TODO\n */\n/*\nfunction fetch(url, args){\n    return new Promise ((resolve, reject) =>{\n\n        //Get Auth Token\n\n        //Append auth token to args headers (if we choose to do auth this way)\n\n        //Send fetch request with args provided and auth token\n        \n        //Resolve fetch request\n\n        resolve(true)\n    })\n}*/\n\nexport default userService;","import React, { Component } from 'react'\nimport {Button, message} from 'antd'\n\nimport db from '../Database/database'\nimport user from '../Services/User'\n\nclass SaveGraph extends Component{\n\n    //For a graph:\n\n    /**\n     * \n     * Locations[associativearray] of Location\n     * Data\n     * Dates: {StartDate, EndDate}\n     * RawData\n     */\n\n    saveGraph = () =>{\n        //Get Number of Dashboards Currently\n        db.Dashboard.toCollection().last().then(object =>{\n            let key = 0\n            if (object){\n                key = object.Id + 1\n            }\n            //Prepare Save Object\n            let newGraph = {\n                Id:key,\n                Title: this.props.Title,\n                \n                Locations: this.props.Locations,\n                Dates: this.props.Dates,\n                Data: this.props.Data,\n                RawData: this.props.RawData\n                \n            }\n\n            db.Dashboard.put(newGraph).then(() =>{\n                message.success(\"Successfully saved to dashboard.\")\n                if (this.props.ParentHandler) this.props.ParentHandler()\n            })\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                <Button icon=\"save\" onClick={this.saveGraph}>Save Graph</Button>\n            </div>\n        )\n    }\n\n}\n\nexport default SaveGraph","import React, { Component } from 'react';\nimport { DatePicker} from 'antd';\nimport moment from 'moment';\n\nconst {MonthPicker} = DatePicker\n\nclass RangeSelector extends Component {\n\n    state = {\n        Dates: {\n            StartDate: this.props.initialData.Dates.StartDate,\n            EndDate: this.props.initialData.Dates.EndDate\n        }\n    }\n\n    startDateOnChange(date, dateString) {\n        var endDate = this.state.Dates.EndDate;\n        this.setState({\n            Dates: { StartDate: new Date(`${dateString}T00:00:00.000Z`), EndDate: endDate }\n        }, () => { \n            this.notifyParent();\n        })\n    }\n\n    endDateOnChage(date, dateString) {\n        var startDate = this.state.Dates.StartDate;\n        this.setState({\n            Dates: { StartDate: startDate, EndDate: new Date(`${dateString}T00:00:00.000Z`) }\n        }, () => { \n            this.notifyParent();\n        })\n    }\n    notifyParent = () =>{\n        if (this.props.parentHandler !== undefined && this.props.parentHandler !== null){\n            this.props.parentHandler(this.state.Dates);\n        }\n    }\n\n\n    plusOne = (num) => {\n        return num + 1;\n    }\n\n    dateToString = (date) => {\n        let str = date.getFullYear() + \"-\" +\n            this.plusOne(date.getMonth()) + \"-\" +\n            this.plusOne(date.getDay());\n        return str;\n    }\n\n    render() {\n        return (\n            <div className=\"center\">\n                <MonthPicker defaultValue={moment(this.dateToString(this.state.Dates.StartDate), 'YYYY-MM-DD')} placeholder=\"Start Date\" onChange={(date, dateString) => { this.startDateOnChange(date, dateString) }} />\n                <MonthPicker defaultValue={moment(this.dateToString(this.state.Dates.EndDate), 'YYYY-MM-DD')} placeholder=\"End Date\" onChange={(date, dateString) => { this.endDateOnChage(date, dateString) }} />\n                {/* <DatePicker defaultValue={moment(this.dateToString(this.state.Dates.StartDate), 'YYYY-MM-DD')} placeholder=\"Start Date\" onChange={(date, dateString) => { this.startDateOnChange(date, dateString) }} /> */}\n                {/* <DatePicker defaultValue={moment(this.dateToString(this.state.Dates.EndDate), 'YYYY-MM-DD')} placeholder=\"End Date\" onChange={(date, dateString) => { this.endDateOnChage(date, dateString) }} /> */}\n            </div>\n        )\n    };\n\n}\n\nexport default RangeSelector;\n","import React, { Component } from 'react';\nimport LocationSelector from '../LocationSelector/LocationSelector';\nimport MetricSelector from '../MetricSelector/MetricSelector';\nimport VisualizerManager from '../Visualizer/VisualizerManager';\nimport SaveGraph from '../Graph/SaveGraph'\nimport RangeSelector from '../RangeSelector/RangeSelector'\nimport { Card, Row, Col, Divider } from 'antd'\n\n\nclass CreateGraph extends Component {\n\n    state = {\n        Location: undefined,\n        Data: undefined,\n        Dates: { StartDate: new Date(\"2015-01-01T00:00:00.000Z\"), EndDate: new Date(\"2019-01-01T00:00:00.000Z\") }\n    }\n\n    updateRawData = (rawData) => {\n        this.setState({\n            RawData: rawData\n        })\n    }\n\n    updateLocation = (location) => {\n        this.setState({ Location: location })\n    }\n\n    updateData = (data) => {\n        this.setState({ Data: data })\n    }\n    updateDates = (dates) => {\n        this.setState({ Dates: dates });\n    }\n    createLocationObject = () => {\n        let loc = this.state.Location\n        let obj = {}\n        if (loc !== undefined) {\n            let name = `${loc.Type}-${loc.Id}`\n            obj[name] = loc\n        }\n        return obj\n    }\n\n    getTitle = () => {\n        if (this.state.Data !== undefined) {\n            return this.state.Data.Name.split(\"(\")[0]\n        }\n        return \"No title\"\n    }\n    render() {\n        return (\n            <div>\n                <Row className={``} gutter={16}>\n                    <Col xs={{ span: 24, offset: 0 }} sm={{ span: 22, offset: 1 }} md={{ span: 18, offset: 3 }} lg={{ span: 16, offset: 4 }}>\n                        <Card className=\"left\" size=\"medium\" title=\"Create a Graph\">\n                            <Row className={``} gutter={16}>\n                                <h4>Select Location</h4>\n                                <LocationSelector\n                                    parentHandler={this.updateLocation}\n                                    initialLocation={\n                                        {\n                                            Id: \"1215\",\n                                            Type: \"Facility\"\n                                        }\n                                    }\n                                />\n                            </Row>\n                            <Divider/>\n                            <Row className={``} gutter={16}>\n\n                                <h4>Select Data</h4>\n                                <MetricSelector\n                                    parentHandler={this.updateData}\n                                    initialData={{\n                                        GroupValue: \"1191|Facility Attendance|Group\",\n                                        SetValue: \"-3-1191|All Facility Attendance (Distribution)|Group\",\n                                        MetricValue: \"\"\n                                    }}\n                                />\n                            </Row>\n                            <Divider/>\n                            <Row className={``} gutter={16}>\n                            <h4>Select Date Range</h4>\n\n                                <RangeSelector\n                                    parentHandler={this.updateDates}\n                                    initialData={\n                                        {\n                                            Dates: this.state.Dates\n                                        }\n                                    }\n                                />\n                            </Row>\n\n\n                        </Card>\n                    </Col>\n                </Row>\n                <Divider />\n                <Row className={``} gutter={16}>\n                    <Col xs={{ span: 24, offset: 0 }} sm={{ span: 22, offset: 1 }} md={{ span: 18, offset: 3 }} lg={{ span: 16, offset: 4 }}>\n                        <Card className=\"left\" size=\"medium\" title=\"Your Graph\">\n                            <div>\n                                <VisualizerManager\n                                    Title={this.state.Data !== undefined && this.state.Data.Name !== undefined ? this.state.Data.Name.split(\"(\")[0] : \"\"}\n                                    Location={this.state.Location} //{Name, Id, Type}\n                                    Data={this.state.Data} // {Id, Type, TotalOrDistribution=\"total|none|distribution\"}\n                                    Dates={this.state.Dates}\n                                    ParentHandler={this.updateRawData}\n                                />\n\n                                <SaveGraph\n                                    Data={this.state.Data}\n                                    Dates={this.state.Dates}\n                                    Locations={this.createLocationObject()}\n                                    Title={this.getTitle()}\n                                    RawData={this.state.RawData}\n                                    ParentHandler={this.props.ParentHandler}\n                                />\n                            </div>\n\n                        </Card>\n                    </Col>\n                </Row>\n            </div>\n        )\n    }\n}\n\nexport default CreateGraph","import React, { Component } from 'react'\n\nimport { message, Icon, Table, Button, List, Card, Row, Col, Radio, Popconfirm } from 'antd'\n\nimport '../../node_modules/react-vis/dist/style.css'\nimport './Dashboard.css'\n\nimport VisualizerManager from '../Visualizer/VisualizerManager';\nimport CreateGraph from '../Graph/CreateGraph'\nimport db from '../Database/database';\nimport Visualizer from '../Visualizer/Visualizer';\n\nlet graphExamples = [\n    // {\n    //     Title: \"Facility Attendance Female, 29d-11 months\",\n    //     Location:{\n    //         Name: \"za Bagega Primary Health Centre\",\n    //         Id:  \"1215\",\n    //         Type: \"Facility\"\n    //     },\n    //     Data:{\n    //         Id: \"11729\",\n    //         Type: \"Metric\",\n    //     },\n    //     Dates:{\n    //         StartDate:new Date(\"2015-01-01T00:00:00.000Z\"),\n    //         EndDate: new Date(\"2015-12-01T00:00:00.000Z\"),\n    //     },\n    //     GraphId: 0\n    // },\n    // {\n    //     Title: \"Facility Attendance Outpatient Value\",\n    //     Location:{\n    //         Name: \"za Bagega Primary Health Centre\",\n    //         Id:  \"1215\",\n    //         Type: \"Facility\"\n    //     },\n    //     Data:{\n    //         Id: \"11493\",\n    //         Type: \"Metric\",\n    //     },\n    //     Dates:{\n    //         StartDate:new Date(\"2015-01-01T00:00:00.000Z\"),\n    //         EndDate: new Date(\"2015-12-01T00:00:00.000Z\"),\n    //     },\n    //     GraphId: 1\n    // },\n    // {\n    //     Title: \"Facility Attendance Outpatient\",\n    //     Location:{\n    //         Name: \"za Bagega Ward\",\n    //         Id:  \"386\",\n    //         Type: \"Ward\"\n    //     },\n    //     Data:{\n    //         Id: \"2094\",\n    //         Type: \"Set\",\n    //     },\n    //     Dates:{\n    //         StartDate:new Date(\"2015-01-01T00:00:00.000Z\"),\n    //         EndDate: new Date(\"2015-12-01T00:00:00.000Z\"),\n    //     },\n    //     GraphId: 2\n    // },\n    // {\n    //     Title: \"Facility Attendance Male\",\n    //     Location:{\n    //         Name: \"za Bagega Ward\",\n    //         Id:  \"386\",\n    //         Type: \"Ward\"\n    //     },\n    //     Data:{\n    //         Id: \"2094\",\n    //         Type: \"Set\",\n    //         TotalOrDistribution: \"distribution\"\n    //     },\n    //     Dates:{\n    //         StartDate:new Date(\"2015-01-01T00:00:00.000Z\"),\n    //         EndDate: new Date(\"2015-12-01T00:00:00.000Z\"),\n    //     },\n    //     GraphId: 3\n    // },\n    // {\n    //     Title: \"Facility Attendance Male\",\n    //     Location:{\n    //         Name: \"za Bagega Primary Health Centre\",\n    //         Id:  \"1215\",\n    //         Type: \"Facility\"\n    //     },\n    //     Data:{\n    //         Id: \"2094\",\n    //         Type: \"Set\",\n    //         TotalOrDistribution: \"distribution\"\n    //     },\n    //     Dates:{\n    //         StartDate:new Date(\"2015-01-01T00:00:00.000Z\"),\n    //         EndDate: new Date(\"2015-12-01T00:00:00.000Z\"),\n    //     },\n    //     GraphId: 4\n    // }\n]\n\nconst metricTableColumns = [\n    {\n        title: \"Metric Tracked\",\n        key: \"metricTracked\",\n        dataIndex: \"metric\",\n        defaultSortOrder: 'descend',\n        sorter: (a, b) => {\n            return b.metric.localeCompare(a.metric, \"en\")\n        },\n    },\n    {\n        title: \"Change\",\n        key: \"change\",\n        dataIndex: \"change\",\n        defaultSortOrder: 'descend',\n        sorter: (a, b) => {\n            return a.change - b.change\n        },\n        render: decimal => {\n            return `${Math.round(decimal * 100)}%`\n        }\n    },\n\n]\n\nconst metricData = [\n    {\n        key: '1',\n        metric: \"Malaria Vaccinations\",\n        change: 0.15\n    },\n    {\n        key: '2',\n        metric: \"Tetanus Vaccinations\",\n        change: -.13\n    },\n    {\n        key: '3',\n        metric: \"Measles Outbreaks\",\n        change: 0\n    },\n]\n\nclass Dashboard extends Component {\n\n    state = {\n        fullSize: true,\n        reportCard: false,\n        showGraphs: true,\n        graphOpenCloseState: null,\n        graphDataLoaded: false,\n        related: null,\n        relatedGraphs: []\n    }\n\n    fullSizeOrListChanged = (e) => {\n        this.setState({ fullSize: e.target.value === \"0\" ? false : true })\n    }\n\n    reportCardOrGraphsChanged = (e) => {\n        this.setState({ reportCard: e.target.value === \"0\" ? false : true }, () => {\n            window.dispatchEvent(new Event('resize'));\n        })\n    }\n\n    toggleGraph = (key) => {\n        //Update the open/close state for this graph\n        let copy = this.state.graphOpenCloseState\n        let newVal = !copy[key].open\n        copy[key] = { open: newVal }\n        let anyOpen = false\n        //Check if all graphs open\n        for (let i = 0; i < Object.keys(copy).length - 1; i++) {\n            if (i === key) continue\n            if (copy[i].open === true) {\n                anyOpen = true\n                break\n            }\n        }\n        if (anyOpen) {\n            copy[\"collapseOrExpandText\"] = { text: \"Collapse All\" }\n        } else {\n            copy[\"collapseOrExpandText\"] = { text: \"Expand All\" }\n        }\n\n        this.setState({ graphOpenCloseState: copy })\n    }\n\n    toggleAllGraphs = () => {\n        //Set future state depending on what the button says\n        //Probably not best practice but it works \n        let openState = this.state.graphOpenCloseState[\"collapseOrExpandText\"].text === \"Collapse All\" ? false : true\n        let copy = this.state.graphOpenCloseState\n        for (let i = 0; i < Object.keys(copy).length - 1; i++) {\n            copy[i].open = openState\n        }\n        copy[\"collapseOrExpandText\"].text = openState ? \"Collapse All\" : \"Expand All\"\n        this.setState({ graphOpenCloseState: copy })\n    }\n\n    createCollapseExpandButton = (key) => {\n        return (\n            <Button key={0} className = \"condensed\" onClick={() => { this.toggleGraph(key) }}>{this.state.graphOpenCloseState[key].open ? \"Collapse\" : \"Expand\"}</Button>\n        )\n    }\n\n    getFirstLocation = (object) => {\n        let keys = Object.keys(object)\n        if (keys.length > 0) {\n            return object[keys[0]]\n        }\n    }\n\n    loadGraphsFromDB = () => {\n        db.Dashboard.toArray().then(arr => {\n            //Create a record of all open/close states for the graphs\n            let visibility = {}\n            for (let i = 0; i < arr.length; i++) {\n                visibility[i] = { open: true, showInFilter: true }\n            }\n\n            console.log(arr)\n\n            visibility[\"collapseOrExpandText\"] = { text: \"Collapse All\" }\n\n            this.setState({\n                graphData: arr,\n                graphDataLoaded: true,\n                graphOpenCloseState: visibility\n            })\n        })\n    }\n\n    componentDidMount() {\n        this.loadGraphsFromDB()\n    }\n\n\n    findAllGraphs = (item) => {\n        return new Promise((resolve) => {\n            let callback = (data) => {\n                resolve(data)\n            }\n\n            switch (item.Data.Type) {\n                case \"Metric\":\n                    db.Metrics.toArray(callback)\n                    break\n                case \"Set\":\n                    db.Sets.toArray(callback)\n                    break\n                case \"Group\":\n                    db.Sets.toArray(callback)\n                    break\n                default:\n                    //\n                    break;\n            }\n        })\n    }\n\n    findRelatedGraphs = (item) => {\n        return this.findAllGraphs(item).then((allData) => {\n            let relatedFound = [];\n            let parentId = \"\"\n            if (item.Data.Type === \"Group\") {\n                parentId = item.Data.Id\n            } else {\n                allData.forEach(function (metricData) {\n                    if (metricData.Id === item.Data.Id) {\n                        parentId = metricData.parentId\n                        return\n                    }\n                })\n            }\n\n            allData.forEach(function (metricData) {\n                if (metricData.parentId === parentId) {\n                    if (metricData.Id != item.Data.Id) {\n                        relatedFound.push(metricData)\n                    }\n                }\n            })\n            return relatedFound;\n        })\n    }\n\n    toggleViewRelated = async (item) => {\n        if (this.state.currentView === \"related\") {\n            this.setState({\n                currentView: \"\"\n            })\n        } else {\n            this.setState({\n                currentView: \"related\"\n            })\n\n            var relatedFound = await this.findRelatedGraphs(item);\n\n            this.processFoundData(relatedFound, item)\n\n        }\n    }\n\n    createViewRelatedButton = (item) => {\n        return (\n            <Button type = \"primary\" className = \"condensed\" onClick={() => { this.toggleViewRelated(item) }}>View Related</Button>\n        )\n    }\n\n    createDeleteButton = (item) =>{\n        return(\n            <Popconfirm placement=\"top\" title = \"Are you sure want to delete this graph?\" okText=\"Delete\" cancelText=\"Cancel\"\n            onConfirm = {() => { this.deleteGraph(item) }}>\n                <Button className=\"condensed\" type = \"danger\" icon = \"delete\">Delete</Button>\n            </Popconfirm>\n            \n        )\n\n    }\n\n    processFoundData = (relatedFound, item) => {\n        let processedRelatedData = []\n        console.log(item)\n        console.log(relatedFound)\n        relatedFound.forEach(function (data) {\n            var temp = JSON.parse(JSON.stringify(item))\n            temp.Title = data.Name\n            if (item.Data.Type === \"Set\" || item.Data.Type === \"Group\") {\n                temp.Title = \"All \" + data.Name\n            } else {\n                temp.Title = data.Name\n            }\n            if (item.Data.Type === \"Set\" || item.Data.Type === \"Group\") {\n                temp.Data.Name = \"All \" + data.Name + \" (Distribution)\"\n            } else {\n                temp.Data.Name = data.Name\n            }\n            temp.Data.Id = data.Id\n            temp.Dates.StartDate = item.Dates.StartDate\n            temp.Dates.EndDate = item.Dates.EndDate\n            temp.RawData = null\n            console.log(\"temp\")\n            console.log(temp)\n            processedRelatedData.push(temp)\n        })\n        this.setState({\n            relatedGraphs: processedRelatedData\n        }, () => { console.log(this.state.relatedGraphs) })\n    }\n\n    deleteGraph = (item) => {\n        db.Dashboard.delete(item.Id).then(() => {\n            db.Dashboard.toArray().then(arr => {\n                this.setState({\n                    graphData: arr\n                });\n                message.success(\"Graph successfully deleted.\");\n            });\n        });\n    }\n\n    renderRelated = () => {\n        return (\n            <List\n                itemLayout=\"vertical\"\n                dataSource={this.state.relatedGraphs}\n                renderItem={(item1, key) => (\n                    <List.Item >\n                        <List.Item.Meta\n                            title={item1.Title}\n                            description={item1.Locations.Name} />\n                        <VisualizerManager\n                            {...item1} //LocationId, Location, etc...\n                            Location={this.getFirstLocation(item1.Locations)}\n                            show = {true}\n                        />\n                    </List.Item>\n                )}>\n            </List>\n        )\n    }\n\n    itemHasCompare = (item) => {\n        return Object.keys(item).includes(\"Compare\")\n    }\n\n\n    renderGraphs = () => {\n        if (this.state.graphDataLoaded !== true) return null\n        return (\n            <List\n                itemLayout=\"vertical\"\n                dataSource={this.state.graphData}\n                renderItem={(item, key) => (\n                    <List.Item \n                    \n                    actions = {[\n                        this.createCollapseExpandButton(key),\n                        this.createViewRelatedButton(item),\n                        this.createDeleteButton(item)\n                    ]}>\n                        {!this.itemHasCompare(item) ? (\n                            <div>\n                                <List.Item.Meta\n                                    title={item.Title}\n                                    description={this.getFirstLocation(item.Locations).Name} />\n \n                                <VisualizerManager\n                                    {...item} //LocationId, Location, etc...\n                                    Location={this.getFirstLocation(item.Locations)}\n                                    show={this.state.graphOpenCloseState[key].open}\n                                />\n\n                            </div>) : (\n                                <div>\n                                    <List.Item.Meta\n                                        title={item.Title}\n                                        description={new Date(item.Dates.StartDate).toUTCString().substring(0, new Date(item.Dates.StartDate).toUTCString().length - 13) + \" - \" + new Date(item.Dates.EndDate).toUTCString().substring(0, new Date(item.Dates.EndDate).toUTCString().length - 13)} />\n                                    <Visualizer\n                                        type={item.GraphType}\n                                        show={true}\n                                        data={item.Data}>\n                                    </Visualizer>\n                                   \n                                </div>)}\n                    </List.Item>\n                )}>\n            </List>\n        )\n\n    }\n\n    showHideCreateGraphUI = () => {\n        this.setState({\n            showGraphs: !this.state.showGraphs\n        }, () => {\n            window.dispatchEvent(new Event('resize'));\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                {\n                    this.state.currentView === \"related\" &&\n                    <div>\n                        <Row className=\"rowVMarginTopSm\" gutter={-1}>\n                            <Col className=\"left\" xs={{ span: 16, offset: 0 }} sm={{ span: 14, offset: 1 }} md={{ span: 10, offset: 3 }} lg={{ span: 8, offset: 4 }}>\n                                <h3>Related Graphs</h3>\n                            </Col>\n                            <Col className=\"right\" span={8}>\n                                <Button onClick={() => { this.toggleViewRelated() }}>Back</Button>\n                            </Col>\n                        </Row>\n                        <div className={this.state.showGraphs ? \"\" : \"displayNone\"}>\n                            <Row className={`rowVMarginSm`} gutter={16}>\n                                <Col xs={{ span: 24, offset: 0 }} sm={{ span: 22, offset: 1 }} md={{ span: 18, offset: 3 }} lg={{ span: 16, offset: 4 }}>\n                                    <Card className=\"left\" size=\"small\">\n                                        {this.renderRelated()}\n                                    </Card>\n                                </Col>\n                            </Row>\n                        </div>\n                    </div>\n\n                }\n                {\n                    this.state.currentView !== \"related\" &&\n                    <div className=\"center gutterOverflowMask\">\n                           \n                            {/* UI For Viewing Graphs */}\n                            {\n                                this.state.graphDataLoaded &&\n                                <div className={this.state.showGraphs ? \"\" : \"displayNone\"}>\n                                    <Row className={`rowVMarginSm rowVMarginTopSm`}>\n                                        <Col className=\"left\" xs={{ span: 12, offset: 0 }} sm={{ span: 11, offset: 1 }} md={{ span: 9, offset: 3 }} lg={{ span: 8, offset: 4 }}>\n                                            <Button onClick={this.toggleAllGraphs}>{this.state.graphOpenCloseState[\"collapseOrExpandText\"].text}</Button>\n                                        </Col>\n                                        <Col className=\"right\" xs={{ span: 12, offset: 0 }} sm={{ span: 11, offset: 0 }} md={{ span: 9, offset: 0 }} lg={{ span: 8, offset: 0 }}>\n                                            <Button icon=\"plus\" type=\"primary\" onClick={this.showHideCreateGraphUI}>Add Graph</Button>\n                                        </Col>\n                                    </Row>\n                                    <Row className={`rowVMarginSm`} gutter={16}>\n                                        <Col xs={{ span: 24, offset: 0 }} sm={{ span: 22, offset: 1 }} md={{ span: 18, offset: 3 }} lg={{ span: 16, offset: 4 }}>\n                                            <Card className=\"left\" size=\"small\">\n                                                {this.renderGraphs()}\n                                            </Card>\n                                        </Col>\n                                    </Row>\n                                </div>\n                            }\n\n                            {/* UI For Creating Graphs */}\n                            <div className={this.state.showGraphs ? \"displayNone\" : \"\"}>\n                                <Row className=\"rowVMarginSm\">\n                                    <Col><Button icon=\"caret-left\" onClick={this.showHideCreateGraphUI}>Back</Button></Col>\n\n                                </Row>\n                                <Row className=\"rowVMarginSm\">\n                                    <CreateGraph\n                                        ParentHandler={this.loadGraphsFromDB}\n                                    />\n                                </Row>\n\n                            </div>\n    \n                    </div>\n                }\n            </div>\n        );\n    }\n}\n\nexport default Dashboard;\n","import React, { Component } from 'react'\nimport {Row, Col, Input, Button} from 'antd'\nimport db from '../Database/database'\nimport UserService from '../Services/User';\nimport { withRouter } from 'react-router-dom'\n\nclass Login extends Component {\n\n    state = {\n        Email: null,\n        Password: null\n    }\n\n    handleInput = (value, property) =>{\n        this.setState({[property]: value})\n    }\n\n    preTab = (text) =>{\n        return(\n            <div style={{minWidth: \"90px\", textAlign:\"right\"}}>\n                {text}\n            </div>\n        )\n    }\n\n    login = () => {\n        UserService.login(this.state.Email,this.state.Password).then((success) => {\n            if(success){\n                //redirect\n                this.props.updateDrawer().then((result) => {\n                    this.props.history.push('/sync');\n                });\n            }\n            else{\n                //failed to login\n            }\n        })\n    }\n\n    render(){\n        return (\n            <div>\n                <Row>\n                    <Col>\n                        <Input \n                            addonBefore={this.preTab(\"Email\")}\n                            type = \"email\"\n                            onChange = {(e) =>{\n                                this.handleInput(e.target.value, \"Email\")\n                            }}\n                            placeholder=\"Email\"/>\n\n                        <Input.Password\n                            addonBefore={this.preTab(\"Password\")}\n                            onChange = {(e) =>{\n                                this.handleInput(e.target.value, \"Password\")\n                            }}\n                            placeholder=\"Password\"/>\n                            \n                        <Button type=\"primary\"\n                            onClick = {this.login}>\n                            Login\n                        </Button>\n                    </Col>\n                    <Col>\n\n                    </Col>\n                </Row>\n\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Login);","import React, { Component } from 'react';\n\nimport {Row, Col} from 'antd'\nimport './SampleHome.css';\nimport MetricSelector from \"../MetricSelector/MetricSelector\"\nimport LocationSelector from \"../LocationSelector/LocationSelector\"\nimport Login from \"../Login/Login\"\nimport userService from '../Services/User'\nimport CreateGraph from '../Graph/CreateGraph';\n\nclass App extends Component {\n\n    state = {\n        location:null,\n        user: null\n    }\n\n    updateLocation = (location) =>{\n        console.log(location)\n        this.setState({location: location})\n    }\n\n    componentWillMount(){\n        userService.user().then((userObj) => {\n            this.setState({user: userObj});\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"sampleApp\">\n                {/* <header className=\"sampleApp-header\">\n                    <p>\n                        This is the Home Page\n                    </p>\n                    <h4>{this.state.location ? this.state.location.Name : \"\"}</h4>\n                    <LocationSelector parentHandler = {this.updateLocation} showLocation = {false}></LocationSelector>\n                </header> */}\n\n                {\n                    this.state.user == null? <Login updateDrawer = {this.props.updateDrawer}></Login> :  \n                    <React.Fragment>\n                        <MetricSelector \n                            parentHandler = {this.updateLocation} \n                            showLabel = {true}\n                            // disabled = {true}\n                            initialData = {{\n                                Type: \"Group\", \n                                Id: \"1191\",\n                                TotalOrDistribution:\"Total\", //Total | Distribution | None. Applicable if Type === Group or Set.\n                                GroupValue: \"1191|Facility Attendance|Group\",\n                                SetValue: \"2094|Facility Attendance Male|Set\",\n                                MetricValue:\"-3-2094|All Facility Attendance Male (Distribution)|Set\"\n                                //This means Group = 1191, and Total for Group\n                            }}>\n                        </MetricSelector>\n                        <Row> User Name is {this.state.user.FirstName} </Row>\n                        <Row>\n                            <Col>\n                            <h4>{this.state.location ? this.state.location.Name : \"\"}</h4>\n                            </Col>\n                        </Row>\n                    </React.Fragment>\n                }\n\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import React, { Component } from 'react'\nimport { Button, Input, Row, Col, Divider, Popconfirm, message, Select } from 'antd'\n\nimport LocationSelector from \"../LocationSelector/LocationSelector\"\n\nimport db from '../Database/database'\nimport user from '../Services/User'\n\nconst userFields = [\n    \"FirstName\",\n    \"LastName\",\n    \"Phone\",\n    \"Email\",\n    \"Id\",\n    \"LocationId\",\n    \"LocationType\",\n    \"UserType\",\n    \"LocationName\"\n]\n\nclass CreateModifyDeleteUser extends Component {\n\n    componentDidMount() {\n        if (this.props.mode === \"new\")\n            this.enableEditing()\n        \n            user.user().then((result) => {\n                this.setState({\n                    ready: true,\n                    loggedInUser: result\n                })\n            })\n        \n    }\n\n    componentWillMount() {\n        this.setState({\n            userInfo: this.computedState(this.props.user),\n            passedUser: this.props.user\n        })\n    }\n    \n\n    componentDidUpdate(oldProps) {\n        const newProps = this.props\n        if (oldProps.user !== newProps.user) {\n            this.setState({\n                passedUser: this.props.user,\n                userInfo: this.computedState(newProps.user)\n            })\n        }\n\n    }\n\n    inputLabelTab = (text) => {\n        return (\n            <div style={{ minWidth: \"90px\", textAlign: \"right\" }}>\n                {text}\n            </div>\n        )\n    }\n\n    state = {\n        mode: this.props.mode ? this.props.mode : \"view\", //View (default unless overridden), create, or edit,\n        userChanged: false,\n        disabled: true,\n        locationDisabled: true,\n        loggedInUser: null\n        //userInfo holds current computed properties (including modifications)\n        //passedUser holds the original user information\n    }\n\n    computedState(user) {\n\n        let userState = {}\n\n        if (user == null) {\n            for (let i = 0; i < userFields.length; i++) {\n                userState[userFields[i]] = null\n            }\n        } else {\n            for (let i = 0; i < userFields.length; i++) {\n                if (userFields[i] in this.props.user) {\n                    userState[userFields[i]] = this.props.user[userFields[i]]\n                } else {\n                    userState[userFields[i]] = null\n                }\n            }\n        }\n        return userState\n    }\n\n    //If this is the user, then they can change the password.\n    //Otherwise, this is an admin, who can reset a password.\n    isUser = () => {\n        return true\n    }\n\n    confirmDelete = async () => {\n        let url = `https://essd-backend-dev.azurewebsites.net/api/users/deleteUser/${this.state.passedUser.Id}`\n        //Send Delete HTTP Request\n        let deleteRequest = await fetch(url, { method: \"delete\" })\n        deleteRequest.json().then((data) => {\n            db.User.delete(this.state.passedUser.Id).then(() => {\n                message.success(\"Successfully deleted user.\")\n                this.props.refreshUsers()\n                this.back();\n            })\n        })\n            .catch((error) => {\n                message.error(\"Sorry, something went wrong.\")\n            })\n    }\n\n    adminFeatures = () => {\n        //Only show delete this is a secondary view (ie showTable_f exists)\n        if (this.props.user != null && this.props.showTable_f !== null) return (\n            <div>\n                <Col className=\"right\">\n                    <Popconfirm placement=\"topRight\" title=\"Are you sure you want to delete this user? This action cannot be reverted.\" onConfirm={this.confirmDelete} okText=\"Delete\" cancelText=\"Cancel\">\n                        <Button type=\"danger\">Delete User</Button>\n                    </Popconfirm>\n                </Col>\n\n            </div>\n        )\n        return null\n    }\n\n    ///Todo: generate function to update state\n\n    inputChanged = (stateName, e) => {\n        let user = this.state.userInfo\n        user[stateName] = e.target.value\n        this.setState({ userInfo: user })\n        this.userInformationChanged()\n    }\n\n    handleUserTypeSelect(value) {\n        let user = this.state.userInfo\n        user[\"UserType\"] = value\n        this.setState({ userInfo: user },() => {console.log(this.state.userInfo)})\n        //this.userInformationChanged()\n    }\n\n    basicFeatures = () => {\n        console.log(this.state.mode);\n        let basicFeatures = [\n            \"First Name\",\n            \"Last Name\",\n            \"Phone\",\n            \"Email\"\n            \n        ]\n\n        let array = []\n\n        for (let i = 0; i < basicFeatures.length; i++) {\n            let featureName = basicFeatures[i]\n            let featureNameKey = featureName.replace(\" \", \"\")   //e.g. \"First Name\" -> user.FirstName\n            array.push(\n                <Input addonBefore={this.inputLabelTab(featureName)}\n                    value={this.state.userInfo ? this.state.userInfo[featureNameKey] : \"\"}\n                    disabled={this.state.disabled || (featureName == \"Email\" && this.state.mode == \"existing\")}\n                    key={i}\n                    onChange={(e) => { this.inputChanged(featureNameKey, e) }} />\n            )\n        }\n\n        let allUserTypeOptions = [];\n\n        switch (this.state.userInfo.UserType) {\n            case \"superadmin\":\n                allUserTypeOptions = [\n                    <Select.Option key={1} value=\"superadmin\">Super Admin</Select.Option>,\n                    <Select.Option key={2} value=\"admin\">Admin</Select.Option>,\n                    <Select.Option key={3} value=\"user\">User</Select.Option>\n                ];\n                break;\n            case \"admin\":\n                allUserTypeOptions = [\n                    <Select.Option key={2} value=\"admin\">Admin</Select.Option>,\n                    <Select.Option key={3} value=\"user\">User</Select.Option>\n                ];\n                break;\n            case \"user\":\n                allUserTypeOptions = [\n                    <Select.Option key={3} value=\"user\">User</Select.Option>\n                ];\n                break;\n        }\n\n        if(this.state.mode == \"new\"){\n            switch (this.state.loggedInUser.UserType) {\n                case \"superadmin\":\n                    allUserTypeOptions = [\n                        <Select.Option key={2} value=\"admin\">Admin</Select.Option>,\n                        <Select.Option key={3} value=\"user\">User</Select.Option>\n                    ];\n                    break;\n                case \"admin\":\n                    allUserTypeOptions = [\n                        <Select.Option key={3} value=\"user\">User</Select.Option>\n                    ];\n                    break;\n            }\n        }\n        \n\n        return (\n            <div>{this.state.ready && <Col>\n                <Divider />\n                {array}\n                <Select style={{ width: \"100%\" }} defaultValue={this.state.userInfo.UserType != null? this.state.userInfo.UserType : \"user\"} placeholder=\"User Type\" onChange={(e)=>{this.handleUserTypeSelect(e)}} disabled={this.state.loggedInUser.Id == this.state.userInfo.Id ? true : this.state.disabled}>\n                    {allUserTypeOptions}\n                </Select>\n                <Divider />\n                {/* Location */}\n                <p>Location</p>\n                {/* Todo: add max scope depending on admin rights*/}\n                <LocationSelector\n                    parentHandler={this.updateLocation}\n                    showLocation={true}\n                    initialLocation={{ Id: this.state.userInfo.LocationId, Type: this.state.userInfo.LocationType }}\n                    disabled={this.state.loggedInUser.Id == this.state.userInfo.Id ? true : this.state.disabled}\n                    maxScope={{Type: this.state.loggedInUser.LocationType, Id: this.state.loggedInUser.LocationId}}/>\n            </Col>\n            }\n            </div>\n        )\n\n    }\n\n    updateLocation = (location) => {\n        let userInfo = this.state.userInfo\n        userInfo.LocationId = location.Id\n        userInfo.LocationType = location.Type\n        this.setState({\n            userInfo: userInfo\n        })\n    }\n\n    modifyControls = () => {\n        if (this.state.disabled) return (\n            <div>\n                <Button onClick={this.enableEditing}>Edit</Button>\n            </div>\n        );\n        else return (\n            <div>\n                <Button hidden={this.state.mode === \"new\"} onClick={this.cancelEditing}>Cancel</Button>\n                <Button disabled={!this.state.userChanged} onClick={this.save}>Save</Button>\n            </div>\n        )\n    }\n\n    cancelEditing = () => {\n        let user = this.computedState(this.state.passedUser)\n        this.setState({\n            userInfo: user,\n            disabled: true,\n            locationDisabled: true,\n        })\n        this.userInformationChanged()\n    }\n\n    enableEditing = () => {\n        user.user().then(u => {\n            if (u.userType === \"admin\") {\n                this.setState({\n                    disabled: false,\n                    locationDisabled: false,\n                })\n            } else {\n                this.setState({\n                    disabled: false,\n                    locationDisabled: true,\n                })\n            }\n            this.userInformationChanged()\n        })\n    }\n\n    userInformationChanged = () => {\n        //Todo: error checking here for valid inputs\n        let changed = false\n        if (this.props.mode === \"new\") {\n            changed = true\n        } else {\n            for (let i = 0; i < userFields.length; i++) {\n                if (this.state.userInfo[userFields[i]] !== this.state.passedUser[userFields[i]]) {\n                    changed = true\n                    break\n                }\n            }\n        }\n        this.setState({ userChanged: changed })\n    }\n\n    save = async () => {\n        let url, successMessage, errorMessage, method = \"\"\n        let successHandler = () => { }\n        let userObject = this.state.userInfo\n\n        if(userObject.UserType == null) \n            userObject.UserType = \"user\"\n\n        if (this.state.mode === \"new\") {\n            //Create User\n            //userObject.UserType = \"user\" //hardCode for now\n            delete userObject.Id\n            url = \"https://essd-backend-dev.azurewebsites.net/api/users/register\"\n            successMessage = \"Successfully added user.\"\n            errorMessage = \"Failed to create user. Please try again later.\"\n            method = \"POST\"\n            successHandler = (result) => {\n                if (\"Id\" in result) {\n                    userObject.Id = result.Id;\n                    userObject.LocationName = result.LocationName;\n                    db.User.add(userObject).then(() => {\n                        message.success(successMessage)\n                        this.props.refreshUsers()\n                        this.back();\n                    })\n                } else {\n                    console.log('throwing an error')\n                    throw new Error(result.error)\n                }\n\n            }\n        } else {\n\n            //Update User\n            //userObject.UserType = \"user\" //hardCode for now\n            url = \"https://essd-backend-dev.azurewebsites.net/api/users/updateUser\"\n            successMessage = \"Successfully updated user.\"\n            errorMessage = \"Failed to update user. Please try again later.\"\n            method = \"PUT\"\n            successHandler = (result) => {\n                if (result.result === \"Update successful\") {\n                    if(this.state.loggedInUser.Id == userObject.Id){\n                        db.LocalUser.put(userObject).then(() => {\n                            message.success(successMessage)\n                            this.props.refreshUsers()\n                            //this.cancelEditing()\n                            this.setState({\n                                user: userObject,\n                                disabled: true,\n                                locationDisabled: true,\n                            })\n                        })\n                    }\n                    else{\n                        db.User.put(userObject).then(() => {\n                            message.success(successMessage)\n                            this.props.refreshUsers()\n                            //this.cancelEditing()\n                            this.setState({\n                                user: userObject,\n                                disabled: true,\n                                locationDisabled: true,\n                            })\n                            this.passedUser = userObject;\n                        })\n                    }\n                    \n                }\n            }\n        }\n\n        let request = await fetch(url, {\n            method: method,\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify(userObject),\n        })\n\n        request.json().then(successHandler)\n            .catch((error) => {\n                console.log(error)\n                message.error(errorMessage)\n            })\n\n    }\n\n    back = () => {\n        //Remove any changes before executing callback\n        this.cancelEditing()\n        this.props.showTable_f()\n    }\n    /**\n     * Always render basic elements (first name, last name, etc)\n     * If current user == user viewed => allow changing password\n     * else if currentUser.type == admin || == superAdmin allow resetting password\n     * TODO: implement this when auth starts to work.\n     */\n    render() {\n        return (\n            <div>\n                {\n                    this.state.ready &&\n                    <div>\n                        {\n                            this.props.showTable_f &&\n                            <Row className=\"rowVMarginSm \">\n                                <Col>\n                                    <Button onClick={this.back} icon=\"caret-left\">Back</Button>\n                                </Col>\n                            </Row>\n                        }\n                        <Row className=\"rowVMarginSm\">\n                            <h3>User Details</h3>\n                            {this.modifyControls()}\n                            {this.basicFeatures()}\n                            <Divider />\n                            {this.adminFeatures()}\n                        </Row>\n\n                    </div>\n                }\n\n\n            </div>\n        )\n    }\n}\n\nexport default CreateModifyDeleteUser;","import React, { Component } from 'react'\nimport CreateModifyDeleteUser from '../Users/CreateModifyDeleteUser'\nimport user from '../Services/User'\nimport { Card, Row, Col } from 'antd'\n\nclass Account extends Component {\n\n    state = {\n        user: null\n    }\n\n    componentDidMount = () => {\n        user.user().then((u) => {\n            this.setState({\n                user: u\n            })\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                {this.state.user &&\n                    <Row className=\"rowVMarginTopSm\" gutter={16}>\n                        <Col xs={{ span: 24, offset: 0 }} sm={{ span: 22, offset: 1 }} md={{ span: 18, offset: 3 }} lg={{ span: 16, offset: 4 }}>\n                            <Card className=\"rowVMarginTopSm\" >\n\n                                <CreateModifyDeleteUser\n                                    showTable_f={null}\n                                    user={this.state.user}\n                                    mode=\"existing\"\n                                    refreshUsers={() => { }\n                                    }\n                                />\n                            </Card>\n\n                        </Col>\n                    </Row>\n                }\n            </div>\n\n\n        )\n    }\n}\n\nexport default Account;","import React, { Component } from 'react'\n\nimport { Card, Row, Col, Table, Spin, Button } from 'antd'\n\nimport CreateModifyDeleteUser from './CreateModifyDeleteUser'\n\nimport db from '../Database/database'\n\nlet dataSource = []\n\nclass User extends Component {\n\n    populateUsers = () => {\n        db.User.toArray((array) => {\n            array.forEach((element) => {\n                //Create additional properties as required\n                element.key = element.Id\n                element.name = `${element.FirstName} ${element.LastName}`\n                element.permissionLevel = element.LocationType.charAt(0).toUpperCase() + element.LocationType.slice(1)\n            })\n\n            dataSource = array.sort((a, b) => {\n                //Sort by last name, then first name\n                try {\n                    let lastNameCompare = a.LastName.localeCompare(b.LastName)\n                    if (lastNameCompare === 0) {\n                        return a.FirstName.localeCompare(b.FirstName)\n                    } else {\n                        return lastNameCompare\n                    }\n\n                } catch (e) {\n                    return -1\n                }\n            })\n            this.setState({ dataLoaded: true })\n            console.log(dataSource)\n\n        })\n\n\n    }\n\n    componentWillMount = () => {\n        this.populateUsers()\n    }\n\n    state = {\n        showTable: true,\n        selectedUser: null,\n        dataLoaded: false,\n        currentView: \"table\"\n    }\n\n    columns = [{\n        title: 'Name',\n        dataIndex: 'name',\n        key: 'name',\n        defaultSortOrder: 'descend',\n        sorter: (a, b) => { return a.name.localeCompare(b.name, 'en') }\n    }, {\n        title: 'Scope',\n        dataIndex: 'permissionLevel',\n        filters: [{\n            text: 'Ward',\n            value: 'Ward',\n        }, {\n            text: 'Facility',\n            value: 'Facility',\n        }, {\n            text: 'LGA',\n            value: 'LGA',\n        }, {\n            text: 'State',\n            value: 'State',\n        }, {\n            text: 'National',\n            value: 'National',\n        }],\n        onFilter: (value, record) => record.permissionLevel === value,\n        filterMultiple: true,\n\n        key: 'permissionLevel',\n    }, {\n        title: \"Location\",\n        dataIndex: \"LocationName\",\n        key: \"LocationName\",\n        defaultSortOrder: 'descend',\n        sorter: (a, b) => { return a.LocationName.localeCompare(b.LocationName, 'en') }\n    }, {\n        title: \"Action\",\n        key: \"action\",\n        render: (text, record) => <Button onClick={() => { this.editUser(record.key) }}>View</Button>\n\n    }];\n\n    editUser = (id) => {\n        let newUser = dataSource.find(object => {\n            return object.Id === id\n        })\n\n        this.setState({\n            currentView: \"existing\",\n            selectedUser: newUser\n        })\n\n    }\n\n    showHideTableClass = () => {\n        return this.state.currentView === \"table\" ? \"\" : \"displayNone\"\n    }\n\n    showHideViewClass = () => {\n        return this.state.currentView === \"existing\" ? \"\" : \"displayNone\"\n    }\n\n    showTable = () => {\n        this.setState(\n            { currentView: \"table\" }\n        )\n    }\n\n    addUser = () => {\n        this.setState({\n            currentView: \"new\"\n        })\n    }\n\n    tableHidden = () => {\n        return this.state.currentView !== \"table\"\n    }\n\n    colStyle = {\n        xs: { span: 24, offset: 0 },\n        sm: { span: 22, offset: 1 },\n        md: { span: 18, offset: 3 },\n        lg: { span: 16, offset: 4 }\n    }\n\n    render() {\n\n        return (\n            <div>\n                {/* Data not yet loaded  */}\n                <Row className=\"rowVMarginSm\" hidden={this.state.dataLoaded}>\n                    <Col {...this.colStyle}>\n\n                        <div className=\"spacing\" >\n                            <Spin size=\"large\" />\n                        </div>\n                    </Col>\n                </Row>\n\n                {/* Data loaded  */}\n                {\n                    this.state.currentView === \"table\" &&\n                    <div class=\"rowVMarginTopSm\">\n\n                        <Row className=\"rowVMarginTopSm\" gutter={16}>\n                            <Col className=\"left\" xs={{ span: 16, offset: 0 }} sm={{ span: 14, offset: 1 }} md={{ span: 10, offset: 3 }} lg={{ span: 8, offset: 4 }}>\n                            </Col>\n                            <Col className=\"right\" span={8}>\n                                <Button\n                                    onClick={this.addUser}\n                                    className={this.showHideTableClass()}\n                                    icon=\"user-add\"\n                                    type=\"primary\"\n                                >\n                                    Add User\n                            </Button>\n                            </Col>\n\n                        </Row>\n                    </div>\n\n                }\n\n                <Row className=\"rowVMarginTopSm\" gutter={16}>\n                    <Col {...this.colStyle}>\n                        <Card className=\"rowVMarginTopSm\" >\n\n                            <div className=\"rowVMarginTopSm\">\n                                <Table\n                                    dataSource={dataSource}\n                                    columns={this.columns}\n                                    className={this.showHideTableClass()}\n                                />\n\n                            </div>\n\n                            {/* Render new component to create a user as required */}\n                            {this.state.currentView !== \"new\" ?\n                                null :\n                                <div className=\"rowVMarginTopSm\">\n                                    <CreateModifyDeleteUser\n                                        showTable_f={this.showTable}\n                                        user={null}\n                                        mode=\"new\"\n                                        refreshUsers={this.populateUsers}\n                                    />\n                                </div>\n                            }\n\n                            {/* Render new component to create a user as required */}\n                            {this.state.currentView !== \"existing\" ?\n                                null :\n                                <div className=\"rowVMarginTopSm\">\n                                    <CreateModifyDeleteUser\n                                        showTable_f={this.showTable}\n                                        user={this.state.selectedUser}\n                                        mode=\"existing\"\n                                        refreshUsers={this.populateUsers}\n                                    />\n                                </div>\n                            }\n                        </Card>\n\n                    </Col>\n                </Row>\n\n            </div>\n\n        )\n    }\n}\n\nexport default User;","import React, { Component } from 'react';\n\n//antd for ui components\nimport { Card, Button, Icon, Row, Col, Timeline } from 'antd'\n\n//db\nimport db from '../Database/database'\nimport user from '../Services/User'\n\nclass Sync extends Component {\n\n    state = {\n        showProgress: false,\n        DataDownloads: []\n    }\n\n    startDownload = () => {\n        let rootURL = \"https://essd-backend-dev.azurewebsites.net/api\"\n        //let rootURL = \"http://localhost:9000/api\"\n        let downloads = [\n            {\n                //Todo: scope the user requests as per the user's roles\n                dataName: \"user\",\n                callback: (data) => {\n                    return new Promise((resolve) => {\n                        db.User.clear().then(() => {\n                            db.User.bulkAdd(data.users).then(() => {\n                                resolve(true)\n                            }).catch((e) => {\n                                console.log(e)\n                                resolve(false)\n                            })\n                        })\n                    })\n                },\n                url: `${rootURL}/users/getAllUsers/${this.state.user.Id}`\n            },\n            {\n                //Todo: Scope the location request as per the user's authorized locations\n                dataName: \"location\",\n                callback: (data) => {\n                    return new Promise((resolve) => {\n                        Promise.all([db.State.clear(), db.LGA.clear(), db.Ward.clear(), db.Facility.clear()]).then(\n                            Promise.all([\n                                db.State.bulkAdd(data.State),\n                                db.LGA.bulkAdd(data.LGA),\n                                db.Ward.bulkAdd(data.Ward),\n                                db.Facility.bulkAdd(data.Facility),\n                            ]).then(\n                                resolve(true)\n                            ).catch(\n                                resolve(false)\n                            )\n                        ).catch(\n                            resolve(false)\n                        )\n                    })\n                },\n                url: `${rootURL}/locationsHierarchy`\n            },\n            {\n                dataName: \"metric values\",\n                callback: (data) => {\n                    return new Promise((resolve) => {\n                        Promise.all([db.Data.clear()]).then(\n                            Promise.all([\n                                db.Data.bulkAdd(data.Data)\n                            ]).then(\n                                resolve(true)\n                            ).catch(\n                                resolve(false)\n                            )\n                        ).catch(\n                            resolve(false)\n                        )\n                    })\n                },\n                //TODO: Scope URL to user \n                url: `${rootURL}/data/location?state=Zamfara&lga=Anka&ward=Bagega`\n            },\n            {\n                dataName: \"metric names\",\n                callback: (data) => {\n                    return new Promise((resolve) => {\n                        Promise.all([db.Groups.clear(), db.Sets.clear(), db.Metrics.clear()]).then(\n                            Promise.all([\n                                db.Groups.bulkAdd(data.Groups),\n                                db.Sets.bulkAdd(data.Sets),\n                                db.Metrics.bulkAdd(data.Metrics),\n                            ]).then(\n                                resolve(true)\n                            ).catch(\n                                resolve(false)\n                            )\n                        ).catch(\n                            resolve(false)\n                        )\n                    })\n                },\n                url: `${rootURL}/data/hierarchy`\n            }\n        ]\n        let dl = []\n        for (let i = 0; i < downloads.length; i++) {\n            let dl_i = downloads[i]\n            dl.push(\n                <DataProgress key={i} dataName={dl_i.dataName} url={dl_i.url} callback={dl_i.callback}></DataProgress>\n            )\n        }\n\n        //Download or upload dashboard data\n        if (!this.state.downloadDashboard) {\n            let url = `${rootURL}/dashboard/updateDashboard`\n            let params = {\n                method: \"PUT\",\n                // body:JSON.stringify({\n                //     UserId: this.state.user.Id,\n                //     DashboardJson: this.state.dashboardData\n                // })\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({\n                    UserId: this.state.user.Id,\n                    DashboardJson: JSON.stringify(this.state.dashboardData)\n                })\n            }\n            console.log(params.body)\n            let callback = (info) => {\n                return new Promise(resolve => {\n                    console.log(info)\n                    resolve(true)\n                })\n            }\n            dl.push(\n                <DataProgress key={dl.length} dataName=\"dashboard information\" url={url} callback={callback} params={params} />\n            )\n        } else {\n            let url = `${rootURL}/dashboard/${this.state.user.Id}`\n            let callback = (_dashboard) => {\n                return new Promise(resolve => {\n                    //The naming scheme needs to be cleaned up a bit here...\n                    let dashboard = _dashboard.dashboard\n                    db.Dashboard.clear().then(() => {\n                        if (!dashboard.hasOwnProperty(\"error\")) {\n                            let data = JSON.parse(dashboard.DashboardJson)\n                            db.Dashboard.bulkAdd(data.dashboards).then(() => {\n                                resolve(true)\n                            })\n                        } else {\n                            //User has no dashboard\n                            resolve(true)\n                        }\n                    })\n                })\n\n            }\n            dl.push(\n                <DataProgress key={dl.length} dataName=\"dashboard information\" url={url} callback={callback} />\n            )\n        }\n\n        this.setState({\n            DataDownloads: dl,\n            showProgress: true\n        })\n    }\n\n    componentDidMount() {\n        db.Dashboard.toArray().then(dashboards => {\n            if (dashboards.length === 0) {\n                user.user().then(u => {\n                    this.setState({\n                        user: u,\n                        ready: true,\n                        downloadDashboard: true\n                    })\n                })\n            } else {\n                user.user().then(u => {\n                    this.setState({\n                        user: u,\n                        ready: true,\n                        downloadDashboard: false,\n                        dashboardData: {\n                            dashboards: dashboards\n                        }\n                    })\n                })\n            }\n\n        })\n\n    }\n\n    render() {\n        return (\n            <div className=\"center\">\n                <Card className=\"rowVMarginTopSm\" >\n\n                    <Row className=\"rowVMarginTopSm\">\n                        <Col xs={24} sm={{ span: 22, offset: 1 }} md={{ span: 18, offset: 2 }} lg={{ span: 16, offset: 4 }} xl={{ span: 16, offset: 4 }}>\n                            <p>\n                                <Icon\n                                    type=\"wifi\" />&nbsp;\n                    Please note: you must have an internet connection.\n                        </p>\n                            {\n                                this.state.ready &&\n                                <Button type=\"primary\" onClick={this.startDownload}>Start Sync</Button>\n                            }\n\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col hidden={!this.state.showProgress} xs={{ span: 22, offset: 1 }} sm={{ span: 20, offset: 2 }} md={{ span: 12, offset: 6 }} lg={{ span: 10, offset: 7 }} xl={{ span: 8, offset: 8 }}>\n                            <Timeline className=\"rowVMarginTopSm\">\n                                {this.state.DataDownloads}\n                            </Timeline>\n                        </Col>\n\n                    </Row>\n                </Card>\n            </div>\n        )\n    }\n}\n\n/**\n * Pass a callback that returns a promise that resolves to true or false\n * so the dataProgress knows if it succeeded or failed\n */\nclass DataProgress extends Component {\n\n    state = {\n        pending: true,\n        failed: false\n    }\n\n    Icon = () => {\n        if (this.state.pending === true) return this.pendingIcon\n        if (this.state.failed === true) return this.failedIcon\n        return this.completeIcon\n    }\n\n    pendingIcon = <Icon type=\"sync\" spin />\n\n    completeIcon = <Icon type=\"check-circle\" className=\"override-background\" />\n\n    failedIcon = <Icon type=\"close-circle\" />\n\n    Message = () => {\n        if (this.state.pending === true) return this.pendingMessage\n        if (this.state.failed === true) return this.failedMessage\n        return this.completeMessage\n    }\n\n    pendingMessage = `Downloading ${this.props.dataName} data`\n\n    failedMessage = `Failed to download ${this.props.dataName} data. Please try again later`\n\n    completeMessage = `Successfully updated ${this.props.dataName} data`\n\n    componentDidMount() {\n        if (this.props.params) {\n            this.get(this.props.url, this.props.callback, this.props.params)\n        } else {\n            this.get(this.props.url, this.props.callback)\n        }\n\n    }\n\n    get = async (url, callback, params) => {\n        let promise = await fetch(url, params)\n        promise.json().then(data => {\n            callback(data).then((result => {\n                if (result) {\n                    this.setState({\n                        pending: false,\n                        failed: false\n                    })\n                } else {\n                    this.setState({\n                        pending: false,\n                        failed: true\n                    })\n                }\n            }))\n        })\n    }\n\n    render() {\n        return (\n            <Timeline.Item\n                dot={this.Icon()}\n            >\n                {this.Message()}\n            </Timeline.Item>)\n    }\n}\nexport default Sync;\n","import React, { Component } from 'react';\n\nimport { Select, Button, Divider } from 'antd'\nimport LocationSelector from \"../LocationSelector/LocationSelector\"\n\n\n\n/**\n * Saves the the location selected\n * @param {parentHandler} - Function passed in by the parent that takes a LocationObject with props {Id, Name, Type} and updates the parent UI\n * @param {initialLocation}\n */\n\nclass LocationWrapper extends Component {\n\n    state = {\n        location: this.props.initialLocation\n    }\n    componnentDidMount = () => {\n        this.setState({\n            location: this.props.initialLocation\n        });\n    }\n    notifyParent = (save) => {\n        if (this.props.parentHandler !== undefined && this.props.parentHandler !== null) {\n            this.props.parentHandler(this.state.location, save);\n        }\n    }\n    updateLocation = (location) => {\n        this.setState({ location: location })\n    }\n    saveLocation = () => {\n        this.notifyParent(true);\n    }\n    cancelLocation = () => {\n        this.notifyParent(false);\n    }\n\n    render() {\n        return (\n            <div>\n                <LocationSelector parentHandler={this.updateLocation} showLocation={false} initialLocation={\n                    {\n                        Id: \"1215\",\n                        Type: \"Facility\"\n                    }\n                }//this.state.location}>\n                ></LocationSelector>\n                <Divider />\n\n                <Button onClick={this.saveLocation}>Save</Button>\n                <Button onClick={this.cancelLocation}>Cancel</Button>\n\n            </div>\n        )\n    }\n}\nexport default LocationWrapper;\n","import React, { Component } from 'react';\nimport { Button, List, Card, Row, Col, Select, Divider, Avatar, Menu, Icon, Dropdown, message, DatePicker } from 'antd'\n\nimport './Analysis.css';\nimport LocationSelector from \"../LocationSelector/LocationSelector\"\nimport LocationWrapper from \"../Analysis/LocationWrapper\"\nimport MetricSelector from \"../MetricSelector/MetricSelector\"\nimport Visualizer from '../Visualizer/Visualizer';\nimport VisualizerManager from '../Visualizer/VisualizerManager'\nimport db from '../Database/database';\nimport moment from 'moment';\nimport RangeSelector from '../RangeSelector/RangeSelector'\n\nvar initialMetric = {\n    GroupValue: \"1191|Facility Attendance|Group\",\n    SetValue: \"-3-1191|All Facility Attendance (Distribution)|Group\",\n    MetricValue: \"\"\n};\nclass Analysis extends Component {\n\n    state = {\n        metricData: {\n            GroupValue: \"1191|Facility Attendance|Group\",\n            SetValue: \"-3-1191|All Facility Attendance (Distribution)|Group\",\n            MetricValue: \"\"\n        },\n        initLoading: false,\n        loading: false,\n        locationData: {\n        },//locationData,\n        showTable: true,\n        selectedUser: null,\n        dataLoaded: false,\n        currentView: \"table\",\n        selectedLocation: null,\n        addingLocation: false,\n        Dates: { StartDate: new Date(\"2015-01-01T00:00:00.000Z\"), EndDate: new Date(\"2019-01-01T00:00:00.000Z\") },\n        arr: null,\n        dataForSingleLocation: [],\n        dataForAllLocations: [],\n        showGraph: false,\n        graphType: \"Group\",\n        data: null\n    }\n    generateGraph = () => {\n        var locationData = [];\n        //convert to array\n        for (var key in this.state.locationData) {\n            locationData.push(this.state.locationData[key]);\n        }\n        if (this.state.metricData.Type == \"Metric\") {\n            this.createMetricGraph(locationData);\n\n        } else if (this.state.metricData.Type == \"Set\") {\n            this.createSetGraph(locationData);\n\n        } else if (this.state.metricData.Type == \"Group\") {\n\n        }\n\n        this.setState({\n            currentView: \"graph\"\n        })\n    }\n    formatDate = (date) => {\n        //Format into YYYY-MM-DDT:00:00:00.000Z\n        let dateString = `${date.getUTCFullYear()}-${(\"0\" + (date.getUTCMonth() + 1)).slice(-2)}-${(\"0\" + date.getUTCDate()).slice(-2)}T00:00:00.000Z`\n        return dateString\n    }\n    createMetricGraph = (locationData) => {\n        var dataForAllLocations = [];\n\n        let context = {\n            dataForAllLocations: dataForAllLocations\n        };\n\n        this.forEachPromise(locationData, this.getDataPromiseByLocation, context).then(() => {\n            console.log(this.state.metricData.Name);\n            this.setState({\n                showGraph: true,\n                currentView: \"graph\",\n                graphType: \"Set\",\n                data: {\n                    name: this.state.metricData.Name,\n                    data: context.dataForAllLocations,\n                }\n            });\n        });\n    }\n    createSetGraph = (locationData) => {\n        var dataForAllLocations = [];\n        var legend = [];\n\n        this.getMetricsPromise(this.state.metricData.Id).then((metrics) => {\n            let context = {\n                dataForAllLocations: dataForAllLocations,\n                metrics: metrics,\n                locations: legend\n            };\n            this.forEachPromise(locationData, this.getLocationPromise, context).then(() => {\n                console.log(context.locations);\n                console.log(context.dataForAllLocations);\n                this.setState({\n                    showGraph: true,\n                    currentView: \"graph\",\n                    graphType: \"Group\",\n                    data: {\n                        data: context.dataForAllLocations,\n                        legendTitles: context.locations\n                    }\n                });\n                console.log(\"donezo\");\n            })\n        })\n\n    }\n\n    forEachPromise = (items, fn, context) => {\n        return items.reduce(function (promise, item) {\n            return promise.then(function () {\n                return fn(item, context);\n            });\n        }, Promise.resolve());\n    }\n\n    getLocationPromise = (location, context) => {\n        return new Promise((resolve, reject) => {\n            let context2 = {\n                location: location,\n                dataForAllLocations: context.dataForAllLocations,\n                dataForSingleLocation: []\n            }\n            this.forEachPromise(context.metrics, this.getDataPromise, context2).then(() => {\n                context.dataForAllLocations.push(context2.dataForSingleLocation);\n                context.locations.push(context2.location.Name)\n            }).then(() => {\n                resolve(true);\n            });\n        })\n    }\n    getMetricsPromise = (setId) => {\n        return db.Metrics.where(\"parentId\").equalsIgnoreCase(setId).toArray();\n    }\n    getDataPromise = (metric, context) => {\n        return new Promise((resolve, reject) => {\n            db.Data.where(\n                [\"FacilityId\", \"MetricId\", 'Time']\n            ).between(\n                [context.location.Id, metric.Id, this.formatDate(this.state.Dates.StartDate)],\n                [context.location.Id, metric.Id, this.formatDate(this.state.Dates.EndDate)],\n                true,\n                true\n            ).toArray().then((arr) => {\n                let sum = 0;\n                arr.forEach((point) => {\n                    sum += parseInt(point.Value);\n                })\n                context.dataForSingleLocation.push({\n                    Value: sum,\n                    Metric: metric.Name\n                });\n                console.log(\"Adding Data from current Metric: \" + metric.Id + \", value: \" + sum);\n                resolve(true);\n            })\n        })\n    }\n    getDataPromiseByLocation = (location, context) => {\n        return new Promise((resolve, reject) => {\n            db.Data.where(\n                [\"FacilityId\", \"MetricId\", 'Time']\n            ).between(\n                [location.Id, this.state.metricData.Id, this.formatDate(this.state.Dates.StartDate)],\n                [location.Id, this.state.metricData.Id, this.formatDate(this.state.Dates.EndDate)],\n                true,\n                true\n            ).toArray().then((arr) => {\n                let sum = 0;\n                arr.forEach((point) => {\n                    sum += parseInt(point.Value);\n                })\n                context.dataForAllLocations.push({\n                    Value: sum,\n                    Metric: location.Name\n                });\n\n                console.log(\"Adding Data from current Location: \" + location.Id + \", value: \" + sum);\n                resolve(true);\n            })\n\n        })\n    }\n    saveGraph = () => {\n        //Get Number of Dashboards Currently\n        db.Dashboard.toCollection().last().then(object => {\n            let key = 0\n            if (object) {\n                key = object.Id + 1\n            }\n            //Prepare Save Object\n            let newGraph = {\n                Id: key,\n                Title: \"Compare - \" + this.state.metricData.Name,\n                Locations: this.state.locationData,\n                Dates: this.state.Dates,\n                Data: this.state.data,\n                MetricData: this.state.metricData,\n                Compare: true,\n                GraphType: this.state.graphType\n            }\n\n            db.Dashboard.put(newGraph).then(() => {\n                console.log(newGraph);\n                message.success(\"Successfully saved to dashboard.\")\n            })\n        })\n    }\n\n    updateRawData = (rawData) => {\n        this.setState({\n            RawData: rawData\n        })\n    }\n\n    updateData = (data) => {\n        this.setState({ metricData: data })\n    }\n    updateLocation = (location, save) => {\n        if (save) {\n            let tempData = this.state.locationData;\n            if (!this.state.addingLocation) {\n                delete tempData[this.state.selectedLocation.Type + \"-\" + this.state.selectedLocation.Id];\n            }\n            tempData[location.Type + \"-\" + location.Id] = location;\n            this.setState({ selectedLocation: location });\n\n            message.success('Location Saved');\n            this.setState({ locationData: tempData });\n        } else {\n            message.warning('Location Not Saved');\n        }\n        this.setState({\n            currentView: \"table\"\n        })\n    }\n    addLocation = () => {\n        this.state.selectedLocation = null;\n        this.setState({\n            addingLocation: true,\n            currentView: \"existing\"\n        })\n    }\n    deleteLocation = (location) => {\n        let locationData = this.state.locationData;\n        delete locationData[location.Type + \"-\" + location.Id]; //might have to edit\n        this.setState({\n            locationData: locationData,\n            selectedLocation: null,\n            currentView: \"table\"\n        });\n\n        message.success(\"Location Deleted\");\n    }\n    editLocation = (location) => {\n        this.setState({\n            addingLocation: false,\n            selectedLocation: location,\n            currentView: \"existing\"\n        })\n\n    }\n    showTable = () => {\n        this.setState(\n            { currentView: \"table\" }\n        )\n    }\n    showHideTableClass = () => {\n        return this.state.currentView === \"table\" ? \"\" : \"displayNone\"\n    }\n\n    updateDates =(dates)=>{\n        this.setState({Dates: dates});\n    }\n    render() {\n        const { initLoading, loading, list } = this.state;\n        const loadMore = !initLoading && !loading ? (\n            <div className=\"center\" >\n                <Button onClick={this.addLocation}>Add Location</Button>\n            </div>\n        ) : null;\n\n        return (\n            <div>\n                {\n                    this.state.currentView === \"table\" &&\n                    <div className=\"center\">\n                        <Row className={``} gutter={16}>\n                            <Col xs={{ span: 24, offset: 0 }} sm={{ span: 22, offset: 1 }} md={{ span: 18, offset: 3 }} lg={{ span: 16, offset: 4 }}>\n                                <Card className=\"left\" size=\"medium\" title=\"Select Metric\">\n                                    <MetricSelector parentHandler={this.updateData}\n                                        initialData={this.state.metricData}\n                                    ></MetricSelector>\n\n                                </Card>\n                            </Col>\n                        </Row>\n                        <Divider />\n                        <Row className={``} gutter={16}>\n                            <Col xs={{ span: 24, offset: 0 }} sm={{ span: 22, offset: 1 }} md={{ span: 18, offset: 3 }} lg={{ span: 16, offset: 4 }}>\n                                <Card className=\"left\" size=\"medium\" title=\"Select Date\">\n                                    <RangeSelector\n                                        parentHandler={this.updateDates}\n                                        initialData={\n                                            {\n                                                Dates: this.state.Dates\n                                            }\n                                        } />\n                                </Card>\n                            </Col>\n                        </Row>\n\n                        <Divider />\n                        <Row className={``} gutter={16}>\n                            <Col xs={{ span: 24, offset: 0 }} sm={{ span: 22, offset: 1 }} md={{ span: 18, offset: 3 }} lg={{ span: 16, offset: 4 }}>\n                                <Card className=\"left\" size=\"medium\" title=\"Select Location\">\n                                    <div className=\"center\" >\n                                        <Button type=\"primary\" block onClick={this.addLocation}>Add Location</Button>\n                                    </div>\n                                    {this.state.locationData &&\n                                        <List\n                                            itemLayout=\"horizontal\"\n                                            size=\"large\"\n                                            pagination={{\n                                                onChange: (page) => {\n                                                    console.log(page);\n                                                },\n                                                pageSize: 4,\n                                            }}\n                                            dataSource={Object.values(this.state.locationData)}\n                                            renderItem={item => (\n                                                <List.Item\n                                                    key={item.facility}\n                                                    actions={[\n                                                        <Button onClick={() => { this.editLocation(item) }} style={{ marginLeft: 8 }}>\n                                                            Edit <Icon type=\"edit\" />\n                                                        </Button>,\n                                                        <Button onClick={() => { this.deleteLocation(item) }} style={{ marginLeft: 8 }}>\n                                                            Delete <Icon type=\"delete\" />\n                                                        </Button>\n                                                    ]}>\n                                                    <List.Item.Meta\n                                                        title={<a href=\"https://ant.design\">{item.Name}</a>}\n                                                        description={\n                                                            \"Location Type: \" + item.Type\n                                                        }\n                                                    />\n                                                </List.Item>\n                                            )}\n                                        />\n                                    }\n                                </Card>\n                            </Col>\n                        </Row>\n\n                        <Divider />\n                        <Row>\n                            <Col xs={{ span: 24, offset: 0 }} sm={{ span: 22, offset: 1 }} md={{ span: 18, offset: 3 }} lg={{ span: 16, offset: 4 }}>\n                                <div className=\"center\" >\n                                    <Button type=\"primary\" block onClick={this.generateGraph}>Generate Graph</Button>\n                                </div>\n                            </Col>\n\n                        </Row>\n                        <Divider />\n\n\n                    </div>\n                }\n\n                {this.state.currentView !== \"existing\" ?\n                    null :\n                    <div className=\"\">\n                        <Row className={``} gutter={16}>\n                            <Col xs={{ span: 24, offset: 0 }} sm={{ span: 22, offset: 1 }} md={{ span: 18, offset: 3 }} lg={{ span: 16, offset: 4 }}>\n                                <Card className=\"left\" size=\"medium\" title=\"Select Location\">\n                                    <LocationWrapper\n                                        parentHandler={this.updateLocation} initialLocation={this.state.selectedLocation}\n                                    />\n                                </Card>\n                            </Col>\n                        </Row>\n\n                    </div>\n                }\n                {this.state.currentView !== \"graph\" ?\n                    null :\n                    <div className=\"\">\n\n                        <Card className=\"left\" size=\"medium\" title=\"Graph\">\n                            <Button onClick={this.showTable}>\n                                Back\n                            </Button>\n                            <Divider />\n                            <Button onClick={this.saveGraph}>\n                                Save Graph <Icon type=\"save\" />\n                            </Button>\n\n                            <Visualizer\n                                type={this.state.graphType}\n                                show={this.state.showGraph}\n                                data={this.state.data}\n                            />\n                        </Card>\n\n                    </div>\n                }\n            </div>\n        );\n    }\n}\n\nexport default Analysis;\n","import React, { Component } from 'react';\nimport { Row, Col, Table, Card, Alert,Divider } from 'antd'\nimport LocationSelector from '../LocationSelector/LocationSelector';\nimport db from '../Database/database'\n\nconst columns = [{\n    title: 'Location',\n    dataIndex: 'Name',\n    key: 'Location',\n    defaultSortOrder: 'ascend',\n    sorter: (a, b) => { return a.Name.localeCompare(b.Name, 'en') }\n}, {\n    title: 'Data Points',\n    dataIndex: 'MetricsReportedInLastYear',\n    key: 'Reports',\n    sorter: (a, b) => { return a.MetricsReportedInLastYear - b.MetricsReportedInLastYear }\n}, {\n    title: 'Percent',\n    dataIndex: 'Score',\n    key: 'Score',\n    sorter: (a, b) => { return a.MetricsReportedInLastYear - b.MetricsReportedInLastYear }\n}];\n\n\nclass DataQuality extends Component {\n\n    state = {\n        ready: false\n    }\n\n    setLocation = (locationData) => {\n        this.setState({ location: locationData })\n        if (locationData.Type === \"Ward\") this.getQualityOfData(locationData.Id)\n    }\n\n    getQualityOfData = (id) => {\n        db.Facility.where({\n            parentId: id\n        }).toArray().then(arr => {\n            const divisor = 512 * 12\n            arr.forEach(el => {\n                el.Score = `${(el.MetricsReportedInLastYear / divisor * 100).toFixed(0)}%`\n                el.key = el.Id\n            })\n            this.setState({\n                data: arr,\n                ready: true\n            })\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                <Alert message=\"This tool reports the amount of data reported in the last year by each facility in a given ward. Use this to identify the facilities that need the most support in the monthly data collection process.\" banner closable />\n\n                <Row className=\"rowVMarginTopSm\" gutter={16}>\n                    <Col xs={{ span: 24, offset: 0 }} sm={{ span: 22, offset: 1 }} md={{ span: 18, offset: 3 }} lg={{ span: 16, offset: 4 }}>\n                        <Card className=\"rowVMarginTopSm\" >\n                            <h3>\n                                Select Location\n                        </h3>\n                        <Divider/>\n                            <LocationSelector\n                                parentHandler={this.setLocation}\n                                initialLocation={{\n                                    Type: \"Ward\",\n                                    Id: \"386\"\n                                }}\n                            />\n\n                        </Card></Col></Row>\n\n                <Row className=\"rowVMarginTopSm\" gutter={16}>\n                <Col xs={{ span: 24, offset: 0 }} sm={{ span: 22, offset: 1 }} md={{ span: 18, offset: 3 }} lg={{ span: 16, offset: 4 }}>\n                        {this.state.ready &&\n                                <Table dataSource={this.state.data} columns={columns}></Table>\n}\n                    </Col>\n                </Row>\n            </div>\n        )\n    }\n}\n\nexport default DataQuality","import React, { Component } from 'react';\n\n//Routing\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\"\n\n//antd for ui components\nimport { Drawer, Icon, Layout, Menu, Divider } from 'antd'\n\n//Nav Bar\nimport NavigationMenu from './NavigationMenu/NavigationMenu'\n\n//pages\nimport Dashboard from './Dashboard/Dashboard'\nimport SampleHome from './SampleHome/SampleHome'\nimport Account from './Account/Account'\nimport User from './Users/Users'\nimport Sync from './Sync/Sync'\nimport Analysis from './Analysis/Analysis'\nimport DataQuality from './DataQuality/DataQuality'\n\nimport userService from './Services/User'\n\nimport './App.css';\n\nconst {\n\tHeader, Footer, Content,\n} = Layout;\n\nconst pathNamesAndTitles = {\n\t\"/\": \"Home\",\n\t\"/account\": \"Account\",\n\t\"/dashboard\": \"Dashboard\",\n\t\"/analysis\": \"Analysis\",\n\t\"/users\": \"Users\",\n\t\"/sync\": \"Synchronize Data\",\n\t\"/health\": \"Data Health\"\n}\n\nclass App extends Component {\n\n\tgetTitle = () => {\n\t\tlet pathName = window.location.pathname\n\t\tif (pathName in pathNamesAndTitles) return pathNamesAndTitles[pathName]\n\t\treturn \"Hmm...this page has no title\"\n\t}\n\n\tstate = {\n\t\tdrawerOpen: false,\n\t\tuser: null\n\t}\n\n\topenDrawer = () => {\n\t\tthis.setState({\n\t\t\tdrawerOpen: true,\n\t\t})\n\t}\n\n\tcloserDrawer = () => {\n\t\tthis.setState({\n\t\t\tdrawerOpen: false,\n\t\t})\n\t}\n\n\tcomponentWillMount() {\n\t\tuserService.user().then((userObj) => {\n\t\t\tthis.setState({\n\t\t\t\tuser: userObj\n\t\t\t})\n\t\t\tconsole.log(this.state.user);\n\t\t});\n\t}\n\n\tupdateDrawer = () => {\n\t\treturn userService.user().then((result) => {\n\t\t\tthis.setState({\n\t\t\t\tuser: result\n\t\t\t})\n\t\t});\n\t}\n\n\tlogout = async () => {\n\t\tthis.setState({\n\t\t\tuser: null\n\t\t});\n\t\tawait userService.logout();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Router>\n\t\t\t\t<Layout>\n\t\t\t\t\t{this.state.user == null ? \"\" :\n\t\t\t\t\t\t<Drawer\n\t\t\t\t\t\t\ttitle=\"Menu\"\n\t\t\t\t\t\t\tplacement=\"left\"\n\t\t\t\t\t\t\tclosable={true}\n\t\t\t\t\t\t\tonClose={this.closerDrawer}\n\t\t\t\t\t\t\tvisible={this.state.drawerOpen}>\n\t\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t\tonClick={this.closerDrawer}>\n\t\t\t\t\t\t\t\t{/* <Menu.Item key=\"1\">\n\t\t\t\t\t\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t\t\t\t\t\t<Icon type=\"home\" />Home\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Menu.Item> */}\n\t\t\t\t\t\t\t\t<Menu.Item key=\"2\">\n\t\t\t\t\t\t\t\t\t<Link to=\"/dashboard\">\n\t\t\t\t\t\t\t\t\t\t<Icon type=\"area-chart\" />Dashboard\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t<Menu.Item key=\"3\">\n\t\t\t\t\t\t\t\t\t<Link to=\"/analysis\">\n\t\t\t\t\t\t\t\t\t\t<Icon type=\"stock\" />Analysis\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t<Menu.Item key=\"4\">\n\t\t\t\t\t\t\t\t\t<Link to=\"/health\">\n\t\t\t\t\t\t\t\t\t\t<Icon type=\"heart\" />Data Health\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t<Menu.Item key=\"5\">\n\t\t\t\t\t\t\t\t\t<Link to=\"/account\">\n\t\t\t\t\t\t\t\t\t\t<Icon type=\"user\" />Account\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.state.user !== null && this.state.user.UserType !== \"admin\" ? \"\" :\n\t\t\t\t\t\t\t\t\t\t<Menu.Item key=\"6\">\n\t\t\t\t\t\t\t\t\t\t\t<Link to=\"/users\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon type=\"team\" />Users\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t<Menu.Item key=\"7\">\n\t\t\t\t\t\t\t\t\t<Link to=\"/sync\">\n\t\t\t\t\t\t\t\t\t\t<Icon type=\"sync\" />Synchronize Data\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t{this.state.user == null ? \"\" :\n\t\t\t\t\t\t\t\t\t<Menu.Item key=\"8\" onClick={this.logout}>\n\t\t\t\t\t\t\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t\t\t\t\t\t\t<Icon type=\"poweroff\" />Logout\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Menu>\n\t\t\t\t\t\t</Drawer>\n\t\t\t\t\t}\n\t\t\t\t\t<Header style={{ padding: 0 }}>\n\t\t\t\t\t\t<NavigationMenu\n\t\t\t\t\t\t\tdrawerOpen={this.state.drawerOpen}\n\t\t\t\t\t\t\topenDrawer_f={this.openDrawer}\n\t\t\t\t\t\t\ttitle={this.getTitle()}>\n\t\t\t\t\t\t</NavigationMenu>\n\t\t\t\t\t</Header>\n\t\t\t\t\t<Content className=\"min-height-wrapper\">\n\t\t\t\t\t\t<Route exact path=\"/\" render={(props) => <SampleHome {...props} updateDrawer={this.updateDrawer} />} />\n\t\t\t\t\t\t<Route path=\"/dashboard\" component={Dashboard} />\n\t\t\t\t\t\t<Route path=\"/analysis\" component={Analysis} />\n\t\t\t\t\t\t<Route path=\"/account\" component={Account} />\n\t\t\t\t\t\t<Route path=\"/users\" component={User} />\n\t\t\t\t\t\t<Route path=\"/sync\" component={Sync} />\n\t\t\t\t\t\t<Route path=\"/health\" component={DataQuality} />\n\t\t\t\t\t</Content>\n\t\t\t\t\t<Footer>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tESSD is an <a href = \"https://github.com/Epidemic-Surveillance-System-Dashboard/\" target = \"_blank\" rel=\"noopener noreferrer\">open source capstone project</a> by Aayush Bahendwar, Jackie Ngo, Laban Lin, and Patrick Lee.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tIt is built with components by \n\t\t\t\t\t\t\t<a href = \"https://ant.design/\" target = \"_blank\" rel=\"noopener noreferrer\"> Ant Financial </a>\n\t\t\t\t\t\t\tand powered by \n\t\t\t\t\t\t\t<a href = \"https://reactjs.org/\" target = \"_blank\" rel=\"noopener noreferrer\"> React </a>.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</Footer>\n\t\t\t\t</Layout>\n\t\t\t</Router>\n\t\t);\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n\nserviceWorker.register();\n"],"sourceRoot":""}